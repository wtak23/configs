

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tak.plt_</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/terminal.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/my_theme.css" type="text/css" />
  

  

  
    <link rel="top" title="" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> My Configs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python.html">Python (<code class="docutils literal"><span class="pre">python.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../python/py-sbia.html">1 sbia workstation (<code class="docutils literal"><span class="pre">py-sbia.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../python/py-sbia.html#symlink-summary">1.1 symlink summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../python/py-sbia.html#ipython-setup">1.2 ipython setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../python/py-sbia.html#content-of-ipython-kernel-config">1.2.1 Content of <code class="docutils literal"><span class="pre">ipython_kernel_config</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../python/py-sbia.html#matplotlibrc">1.3 matplotlibrc</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../python/py-sbia.html#content-of-matplotlibrc">1.3.1 Content of <code class="docutils literal"><span class="pre">matplotlibrc</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../python/py-sbia.html#new-symlink-to-sitecustomize-py">1.4 New - symlink to sitecustomize.py</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../python/py-sbia.html#current-content-of-sitecustomize-py">1.4.1 Current content of <code class="docutils literal"><span class="pre">sitecustomize.py</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python/py-sbia.html#what-does-sitecustomize-py-do">1.4.2 what does sitecustomize.py do?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python/py-sbia.html#current-content-of-sitecustomize-spyder-py">1.4.3 Current content of <code class="docutils literal"><span class="pre">sitecustomize_spyder.py</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../python/py-sbia.html#changes-with-original">1.5 Changes with _original</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../python/py-win.html">2 Windows machine (<code class="docutils literal"><span class="pre">py-win.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../python/py-win.html#pip-installs">2.1 pip installs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../python/py-win.html#rollback-sphinx-to-version-1-3-5">2.2 Rollback Sphinx to Version 1.3.5</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../python/old/py-old.html">3 old-notes (<code class="docutils literal"><span class="pre">py-old.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../python/old/py-old.html#feb-24-2016">3.1 Feb 24, 2016</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../python/old/py-old.html#stuffs-installed-after-03-30-2016">3.2 Stuffs installed after 03-30-2016</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../python/old/py-old.html#bleeding-edge-version-of-lasagne-04-11-2016">3.2.1 Bleeding edge version of lasagne (04/11/2016)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python/old/py-old.html#reupdate-theano-to-0-8-04-1-2016">3.2.2 Reupdate theano to 0.8 (04/1/2016)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../python/old/py-old.html#stuffs-installed-11-30-2015">3.3 Stuffs installed (11/30/2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../python/old/py-old.html#moduel-install-very-old-modules-install">3.4 moduel-install: VERY old modules install</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../python/old/py-old.html#module-installs-install-modules-sh">3.4.1 <code class="docutils literal"><span class="pre">./module-installs/install_modules.sh</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python/old/py-old.html#module-installs-pyinstall-sh">3.4.2 <code class="docutils literal"><span class="pre">./module-installs/pyinstall.sh</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python/old/py-old.html#module-installs-spams-install-sh">3.4.3 <code class="docutils literal"><span class="pre">./module-installs/spams_install.sh</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../python/old/py-old.html#module-installs-tak-install-sh">3.4.4 <code class="docutils literal"><span class="pre">./module-installs/tak_install.sh</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../bash_config.html">Bash config files (<code class="docutils literal"><span class="pre">bash_config.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../bash_config/bash-sbia.html">1 SBIA Workstation (<code class="docutils literal"><span class="pre">bash-sbia.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../bash_config/bash-sbia.html#symlinks">1.1 Symlinks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bash_config/bash-sbia.html#bashrc-contents">1.2 bashrc contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bash_config/bash-sbia.html#gitconfig-content">1.3 gitconfig content</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../bash_config/bash-cygwin.html">2 Cygwin setup (<code class="docutils literal"><span class="pre">bash-cygwin.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../bash_config/bash-cygwin.html#symlink-setup">2.1 symlink setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bash_config/bash-cygwin.html#bashrc-content">2.2 bashrc content</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bash_config/bash-cygwin.html#bash-aliases-content">2.3 bash_aliases content</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bash_config/bash-cygwin.html#apt-cyg">2.4 apt-cyg</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../bash_config/bash-cygwin.html#things-i-install-on-most-of-my-computers">2.4.1 Things I install on most of my computers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../bash_config/bash-cygwin.html#git-related-stuffs">2.5 git related stuffs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../bash_config/bash-cygwin.html#github-sshkey">2.5.1 github sshkey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../bash_config/bash-cygwin.html#git-code-completion">2.5.2 git code completion</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../bash_config/bash-cygwin.html#random-overflows">2.6 Random overflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../bash_config/bash-cygwin.html#to-get-git-gui-working">2.6.1 to get git gui working...</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../bash_config/bash-cygwin.html#xming-setup">2.6.2 xming setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../bash_config/bash-cygwin.html#disable-annoying-bell-sound-in-cygwin">2.6.3 disable annoying bell sound in cygwin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../bash_config/bash-defaults.html">3 Default bash config files (<code class="docutils literal"><span class="pre">bash-defaults.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../bash_config/bash-defaults.html#default-bashrc-ubuntu">3.1 Default .bashrc, ubuntu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../bash_config/bash-defaults.html#default-bashrc-cygwin">3.2 Default .bashrc, cygwin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../sublime.html">Sublime Text Setup (<code class="docutils literal"><span class="pre">sublime.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../sublime/subl-gen.html">1 Sublime &#8211; General Notes (<code class="docutils literal"><span class="pre">subl-gen</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../sublime/subl-gen.html#packages-installed">1.1 Packages Installed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sublime/subl-sbia.html">2 SBIA Workstation (<code class="docutils literal"><span class="pre">subl-sbia.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../sublime/subl-sbia.html#file-tree">2.1 File-tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sublime/subl-sbia.html#symbolic-links-created">2.2 Symbolic links created</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../sublime/subl-sbia.html#file-wise-setup">2.2.1 File-wise setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../sublime/subl-sbia.html#installed-packges">2.3 Installed packges</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sublime/subl-sbia.html#preferences-sublime-settings-content">2.4 Preferences.sublime-settings Content</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sublime/subl-sbia.html#default-linux-sublime-keymap-content">2.5 Default (Linux).sublime-keymap Content</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sublime/subl-win.html">3 Windows setup (<code class="docutils literal"><span class="pre">subl-win.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../sublime/subl-win.html#symlinks">3.1 Symlinks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sublime/subl-win.html#installed-packages">3.2 Installed Packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../sublime/subl-win.html#xps8900">3.2.1 xps8900</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sublime/subl-win.html#asus">3.2.2 asus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sublime/subl-win.html#asus-diff-with-sbia-workstation">3.2.3 asus diff with sbia workstation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../sublime/subl-win.html#bunch-of-random-helpful-config-stuffs">3.3 Bunch of random helpful config stuffs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../sublime/subl-win.html#open-cygwin-shell-via-right-click-in-explorer">3.3.1 Open cygwin shell via right-click in explorer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../sublime/subl-win.html#getting-buildsystem-to-work-with-cygwin">3.3.2 Getting buildsystem to work with cygwin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sublime/subl-ref.html">4 References (<code class="docutils literal"><span class="pre">subl-ref.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../sublime/subl-ref.html#scope-info-for-snippets-and-build-system">4.1 Scope info (for snippets and build system)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sublime/subl-ref.html#build-system-info">4.2 Build system info</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sublime/subl-ref.html#when-sublime-keeps-crashing-at-startup">4.3 When sublime keeps crashing at startup...</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sublime/subl-defaults.html">5 Default-settings (<code class="docutils literal"><span class="pre">subl-defaults.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../sublime/subl-defaults.html#preferences-sublime-settings-linux">5.1 Preferences.sublime-settings (Linux)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../R.html">R (<code class="docutils literal"><span class="pre">R.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../R.html#configuring-r-startup">Configuring R startup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../R.html#linux-sylminks">Linux - sylminks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../R.html#windows-symlinks">Windows - symlinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../R.html#config-file-contents">Config file contents</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../R.html#r-snippets">r.snippets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../R.html#hotkeys">hotkeys</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../windows.html">Windows machine setup (<code class="docutils literal"><span class="pre">windows.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../windows/autohotkey/win-ahk.html">1 Autohotkey (<code class="docutils literal"><span class="pre">win-ahk.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../windows/autohotkey/win-ahk.html#main-references">1.1 Main references</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../windows/autohotkey/win-ahk.html#notes">1.2 Notes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../windows/autohotkey/win-ahk.html#details-on-sentinput">1.2.1 Details on <strong>SentInput</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../windows/autohotkey/win-ahk.html#variables-in-ahk">1.2.2 Variables in AHK</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../windows/autohotkey/win-ahk.html#looping-in-ahk">1.2.3 Looping in AHK</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../windows/autohotkey/win-ahk.html#other-useful-references">1.2.4 other useful references</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../windows/office-setup/win-office.html">2 MS Office Setups (<code class="docutils literal"><span class="pre">win-office.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../windows/office-setup/win-office.html#word-macro">2.1 Word macro</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../windows/office-setup/win-office.html#one-note">2.2 One-note</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../windows/win-xps8900.html">3 XPS8900 Desktop settings (<code class="docutils literal"><span class="pre">win-xps8900.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../windows/win-xps8900.html#startup-files">3.1 Startup Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../windows/win-xps8900.html#symlinks">3.2 symlinks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../windows/win-xps8900.html#cygwin-configs">3.2.1 cygwin configs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../windows/win-xps8900.html#sublime-text">3.2.2 Sublime text</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../windows/win-xps8900.html#office">3.2.3 Office</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../windows/win-asus.html">4 ASUS laptop settings (<code class="docutils literal"><span class="pre">win-asus.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../windows/win-asus.html#startup-files">4.1 Startup Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../windows/win-asus.html#symlinks">4.2 symlinks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../windows/win-asus.html#cygwin-configs">4.2.1 cygwin configs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../windows/win-asus.html#sublime-text">4.2.2 Sublime text</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../windows/win-asus.html#office">4.2.3 Office</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../windows/win-old-notes.html">5 (Old) Thing to do on a new computer (<code class="docutils literal"><span class="pre">win-old-notes.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../windows/win-old-notes.html#softwares-to-install">5.1 Softwares to install</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../windows/win-old-notes.html#the-essentials">5.1.1 The &#8220;Essentials&#8221;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../windows/win-old-notes.html#computational">5.1.2 Computational</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../windows/win-old-notes.html#non-essentials">5.1.3 Non-essentials</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../windows/win-old-notes.html#short-cuts-to-add-in-startup-folder">5.2 Short-cuts to add in &#8220;Startup&#8221; folder</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../windows/win-old-notes.html#xming">5.2.1 xming</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../windows/win-old-notes.html#misc">5.3 misc</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../windows/win-old-notes.html#username-change">5.3.1 Username change</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../windows/win-old-notes.html#location-of-normal-dotm">5.3.2 Location of <code class="docutils literal"><span class="pre">Normal.dotm</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../trouble-shooting.html">Trouble-shooting notes (<code class="docutils literal"><span class="pre">trouble-shooting.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../trouble-shooting/ts-bash.html">1 ts-bash (<code class="docutils literal"><span class="pre">ts-bash.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../trouble-shooting/ts-bash.html#getting-mysql-to-work-on-cygwin">1.1 Getting mysql to work on cygwin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../trouble-shooting/ts-bash.html#conf-file">1.1.1 conf file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../trouble-shooting/ts-bash.html#pip-install-mysql-doesn-t-work">1.1.2 pip install mysql doesn&#8217;t work</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../trouble-shooting/ts-bash.html#cygwin-apt-cyg-didn-t-work-well">1.1.3 cygwin apt-cyg didn&#8217;t work well...</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../trouble-shooting/ts-bash.html#apt-cyg-install-md5sum-error">1.1.4 apt-cyg install md5sum error</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../trouble-shooting/ts-bash.html#old-notes-from-old-config-master-repos">1.2 Old-notes from old config_master repos</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../trouble-shooting/ts-bash.html#color-in-less">1.2.1 Color in less</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../trouble-shooting/ts-bash.html#latex-installer-06-15-2016-21-48">1.2.2 Latex installer 06-15-2016 (21:48)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../trouble-shooting/ts-sublime.html">2 ts-sublime (<code class="docutils literal"><span class="pre">ts-sublime.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../trouble-shooting/ts-sublime.html#latexing-complaining-cannot-find-pdflatex-command">2.1 Latexing complaining cannot find pdflatex command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../trouble-shooting/ts-sublime.html#old-notes-from-old-config-master-repos">2.2 Old-notes from old config_master repos</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../trouble-shooting/ts-sublime.html#how-to-remove-startup-session">2.2.1 How to remove startup session</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../trouble-shooting/ts-sublime.html#omni-markup-error">2.2.2 omni-markup error</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../trouble-shooting/ts-sublime.html#get-images-from-goto">2.2.3 get images from goto</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../trouble-shooting/ts-python.html">3 ts-python (<code class="docutils literal"><span class="pre">ts-python.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../trouble-shooting/ts-python.html#getting-theano-to-work-on-windows">3.1 Getting theano to work on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../trouble-shooting/ts-python.html#no-clue-why-but-jupyter-kernel-keeps-dying">3.2 No clue why, but jupyter kernel keeps dying...</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../trouble-shooting/ts-python.html#pip-install-mysql-doesn-t-work">3.3 pip install mysql doesn&#8217;t work</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../trouble-shooting/ts-python.html#cygwin">3.3.1 cygwin</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../trouble-shooting/ts-python.html#linux-ubutu-14-04">3.3.2 Linux (ubutu 14.04)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../trouble-shooting/ts-python.html#pip-install-psycopg2-for-postgreql">3.4 pip install psycopg2 for postgreql</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../trouble-shooting/ts-R.html">4 ts-R (<code class="docutils literal"><span class="pre">ts-R.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../trouble-shooting/ts-R.html#ggplot2-load-error-on-windows">4.1 ggplot2 load error on windows</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../misc.html">Miscellaneous (<code class="docutils literal"><span class="pre">misc.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../misc/misc-symlinks.html">1 Misc symlinks (<code class="docutils literal"><span class="pre">misc-symlinks.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../misc/misc-symlinks.html#sql-related">1.1 SQL related</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../misc/misc-symlinks.html#mysql-setup-windows">1.1.1 MySql setup (windows)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/misc-symlinks.html#sqlite-setup">1.1.2 sqlite setup</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/misc-cuda-old.html">2 cuda-installation (old) (<code class="docutils literal"><span class="pre">misc-cuda-old.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../misc/misc-cuda-old.html#installing-theano">2.1 Installing Theano</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../misc/misc-cuda-old.html#installing-cuda">2.2 Installing cuda</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../misc/misc-cuda-old.html#references">2.2.1 references</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../misc/misc-cuda-old.html#pre-september">2.3 Pre september</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../misc/misc-cuda-old.html#cuda-install-output">2.4 cuda install output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../misc/misc-sbia-setups.html">3 Misc symlinks (<code class="docutils literal"><span class="pre">misc-symlinks.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../misc/misc-sbia-setups.html#sql-related">3.1 SQL related</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../test_autodoc.html"><code class="docutils literal"><span class="pre">test_autodoc.rst</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../test_autodoc.html#visualization">Visualization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../test_autodoc.html#imconnmat">imconnmat</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../test_autodoc.html#non-negative-matrix-factorization">Non-negative Matrix Factorization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../test_autodoc.html#nmf-ls-pnmf-admm">nmf.ls_pnmf_admm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../test_autodoc.html#nmf-ls-sgpnmf-admm">nmf.LS_SGPNMF_ADMM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../test_autodoc.html#data-io">Data IO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../test_autodoc.html#data-tob-pnc-load-bct-measures">data.tob_pnc.load_bct_measures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../test_autodoc.html#data-tob-pnc-load-diffusion-volume-matfile">data.tob_pnc.load_diffusion_volume_matfile</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../test_autodoc.html#data-tob-pnc-load-connectome-matfile">data.tob_pnc.load_connectome_matfile</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">My Configs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>tak.plt_</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for tak.plt_</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="kn">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="kn">from</span> <span class="nn">.core</span> <span class="kn">import</span> <span class="n">threshold_L1conc</span>
<span class="kn">from</span> <span class="nn">.stats</span> <span class="kn">import</span> <span class="n">ttest_fdr_corrected</span>
<span class="kn">from</span> <span class="nn">scipy.spatial.distance</span> <span class="kn">import</span> <span class="n">squareform</span> <span class="k">as</span> <span class="n">sqform</span>
<span class="kn">import</span> <span class="nn">seaborn.apionly</span> <span class="kn">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">traceback</span>
<span class="c1">#%% === platform dependent functions (cell began 2016-01-23) ===</span>
<span class="kn">from</span> <span class="nn">socket</span> <span class="kn">import</span> <span class="n">gethostname</span>
<span class="n">hostname</span> <span class="o">=</span> <span class="n">gethostname</span><span class="p">()</span>

<span class="k">if</span> <span class="n">hostname</span> <span class="o">==</span> <span class="s1">&#39;takanori-PC&#39;</span><span class="p">:</span>
    <span class="c1"># on my home 27in computer (used tw.fig_get_geom())</span>
    <span class="sd">&quot;&quot;&quot;&quot; (x,y, width, height), x=0 means very left, y=0 means very top&quot;&quot;&quot;</span>
    <span class="n">_L</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1440.</span> <span class="c1"># left-position</span>
    <span class="n">_T</span>  <span class="o">=</span> <span class="mf">22.</span> <span class="c1"># top-position</span>
    <span class="n">_W</span> <span class="o">=</span> <span class="mf">1440.</span> <span class="c1"># width at fullscreen</span>
    <span class="n">_H</span> <span class="o">=</span><span class="mf">878.</span>   <span class="c1"># height at fullscreen</span>

    <span class="n">_screen_default</span> <span class="o">=</span> <span class="p">(</span><span class="n">_L</span><span class="p">,</span>        <span class="n">_T</span><span class="p">,</span>   <span class="mi">640</span><span class="p">,</span>  <span class="mi">640</span><span class="p">)</span>
    <span class="n">_screen_full</span>    <span class="o">=</span> <span class="p">(</span><span class="n">_L</span><span class="p">,</span>        <span class="n">_T</span><span class="p">,</span>    <span class="n">_W</span><span class="p">,</span>   <span class="n">_H</span><span class="p">)</span>
    <span class="n">_screen_left</span>    <span class="o">=</span> <span class="p">(</span><span class="n">_L</span><span class="p">,</span>        <span class="n">_T</span><span class="p">,</span>  <span class="n">_W</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>   <span class="n">_H</span><span class="p">)</span>
    <span class="n">_screen_right</span>   <span class="o">=</span> <span class="p">(</span><span class="n">_L</span><span class="o">+</span><span class="n">_W</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>   <span class="n">_T</span><span class="p">,</span>  <span class="n">_W</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>   <span class="n">_H</span><span class="p">)</span>

    <span class="c1"># the +/-10 is to avoid mild overlap between &quot;t&quot; and &quot;b&quot;</span>
    <span class="n">_screen_top</span>     <span class="o">=</span> <span class="p">(</span><span class="n">_L</span><span class="p">,</span>        <span class="n">_T</span><span class="p">,</span>  <span class="n">_W</span><span class="p">,</span>  <span class="n">_H</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">_screen_bottom</span>  <span class="o">=</span> <span class="p">(</span><span class="n">_L</span><span class="p">,</span> <span class="n">_T</span><span class="o">+</span><span class="n">_H</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span>  <span class="n">_W</span><span class="p">,</span>  <span class="n">_H</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span>

    <span class="n">_screen_bl</span>      <span class="o">=</span> <span class="p">(</span><span class="n">_L</span><span class="p">,</span>      <span class="n">_T</span><span class="o">+</span><span class="n">_H</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span>  <span class="n">_W</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>  <span class="n">_H</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># bottom-left</span>
    <span class="n">_screen_br</span>      <span class="o">=</span> <span class="p">(</span><span class="n">_L</span><span class="o">+</span><span class="n">_W</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">_T</span><span class="o">+</span><span class="n">_H</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span>  <span class="n">_W</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>  <span class="n">_H</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># bottom-right</span>
    <span class="n">_screen_tl</span>      <span class="o">=</span> <span class="p">(</span><span class="n">_L</span><span class="p">,</span>      <span class="n">_T</span><span class="p">,</span>         <span class="n">_W</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>  <span class="n">_H</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># top-left</span>
    <span class="n">_screen_tr</span>      <span class="o">=</span> <span class="p">(</span><span class="n">_L</span><span class="o">+</span><span class="n">_W</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">_T</span><span class="p">,</span>         <span class="n">_W</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>  <span class="n">_H</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># top-right</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># on my sbia computer monitor</span>
    <span class="n">_screen_default</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1500</span><span class="p">,</span>     <span class="mi">25</span><span class="p">,</span>  <span class="mi">640</span><span class="p">,</span>  <span class="mi">640</span><span class="p">)</span>
    <span class="n">_screen_full</span>    <span class="o">=</span> <span class="p">(</span><span class="mi">1500</span><span class="p">,</span>     <span class="mi">25</span><span class="p">,</span> <span class="mi">1280</span><span class="p">,</span>  <span class="mi">924</span><span class="p">)</span>
    <span class="n">_screen_full2</span>   <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span>     <span class="mi">25</span><span class="p">,</span> <span class="mi">1600</span><span class="p">,</span>  <span class="mi">850</span><span class="p">)</span>
    <span class="n">_screen_left</span>    <span class="o">=</span> <span class="p">(</span><span class="mi">1500</span><span class="p">,</span>     <span class="mi">25</span><span class="p">,</span>  <span class="mi">640</span><span class="p">,</span>  <span class="mi">924</span><span class="p">)</span>
    <span class="n">_screen_right</span>   <span class="o">=</span> <span class="p">(</span><span class="mi">2240</span><span class="p">,</span>     <span class="mi">25</span><span class="p">,</span>  <span class="mi">640</span><span class="p">,</span>  <span class="mi">924</span><span class="p">)</span>
    <span class="n">_screen_top</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">1500</span><span class="p">,</span>     <span class="mi">25</span><span class="p">,</span> <span class="mi">1280</span><span class="p">,</span>  <span class="mi">462</span><span class="p">)</span>
    <span class="n">_screen_bottom</span>  <span class="o">=</span> <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">25</span><span class="o">+</span><span class="mi">462</span><span class="p">,</span> <span class="mi">1280</span><span class="p">,</span>  <span class="mi">462</span><span class="p">)</span>
    <span class="n">_screen_bl</span>      <span class="o">=</span> <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">25</span><span class="o">+</span><span class="mi">462</span><span class="p">,</span>  <span class="mi">640</span><span class="p">,</span>  <span class="mi">462</span><span class="p">)</span> <span class="c1"># bottom-left</span>
    <span class="n">_screen_br</span>      <span class="o">=</span> <span class="p">(</span><span class="mi">2240</span><span class="p">,</span> <span class="mi">25</span><span class="o">+</span><span class="mi">462</span><span class="p">,</span>  <span class="mi">640</span><span class="p">,</span>  <span class="mi">462</span><span class="p">)</span> <span class="c1"># bottom-right</span>
    <span class="n">_screen_tl</span>      <span class="o">=</span> <span class="p">(</span><span class="mi">1500</span><span class="p">,</span>     <span class="mi">25</span><span class="p">,</span>  <span class="mi">640</span><span class="p">,</span>  <span class="mi">462</span><span class="p">)</span> <span class="c1"># top-left</span>
    <span class="n">_screen_tr</span>      <span class="o">=</span> <span class="p">(</span><span class="mi">2240</span><span class="p">,</span>     <span class="mi">25</span><span class="p">,</span>  <span class="mi">640</span><span class="p">,</span>  <span class="mi">462</span><span class="p">)</span> <span class="c1"># top-right</span>
<span class="c1">#%% === docstring wrapper ===</span>
<span class="k">def</span> <span class="nf">plt_docstring_text_kwargs</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Doc string</span>
<span class="sd">    </span>
<span class="sd">    </span>
<span class="sd">    https://github.com/matplotlib/matplotlib/blob/master/doc/users/text_props.rst</span>
<span class="sd">    </span>
<span class="sd">    http://matplotlib.org/users/text_props.html</span>
<span class="sd">    </span>
<span class="sd">    http://matplotlib.org/_sources/users/text_props.txt</span>
<span class="sd">    </span>
<span class="sd">    Table from :func:`matplotlib..text.Annotation`</span>
<span class="sd">    </span>
<span class="sd">        ========================== ================================================</span>
<span class="sd">        Property                   Value</span>
<span class="sd">        ========================== ================================================</span>
<span class="sd">        alpha                      float or None</span>
<span class="sd">        animated                   [True | False]</span>
<span class="sd">        backgroundcolor            any matplotlib color</span>
<span class="sd">        bbox                       rectangle prop dict plus key &#39;pad&#39; which is a</span>
<span class="sd">                                   pad in points; if a boxstyle is supplied as</span>
<span class="sd">                                   a string, then pad is instead a fraction</span>
<span class="sd">                                   of the font size</span>
<span class="sd">        clip_box                   a matplotlib.transform.Bbox instance</span>
<span class="sd">        clip_on                    [True | False]</span>
<span class="sd">        color                      any matplotlib color</span>
<span class="sd">        family                     [&#39;serif&#39; | &#39;sans-serif&#39; | &#39;cursive&#39; |</span>
<span class="sd">                                    &#39;fantasy&#39; | &#39;monospace&#39;]</span>
<span class="sd">        figure                     a matplotlib.figure.Figure instance</span>
<span class="sd">        fontproperties             a matplotlib.font_manager.FontProperties</span>
<span class="sd">                                   instance</span>
<span class="sd">        horizontalalignment or ha  [&#39;center&#39; | &#39;right&#39; | &#39;left&#39;]</span>
<span class="sd">        label                      any string</span>
<span class="sd">        linespacing                float</span>
<span class="sd">        lod                        [True | False]</span>
<span class="sd">        multialignment             [&#39;left&#39; | &#39;right&#39; | &#39;center&#39; ]</span>
<span class="sd">        name or fontname           string e.g.,</span>
<span class="sd">                                   [&#39;Sans&#39; | &#39;Courier&#39; | &#39;Helvetica&#39; ...]</span>
<span class="sd">        position                   (x,y)</span>
<span class="sd">        rotation                   [ angle in degrees &#39;vertical&#39; | &#39;horizontal&#39;</span>
<span class="sd">        rotation_mode              [ None | &#39;anchor&#39;]</span>
<span class="sd">        size or fontsize           [size in points | relative size e.g., &#39;smaller&#39;,</span>
<span class="sd">                                                                      &#39;x-large&#39;]</span>
<span class="sd">        style or fontstyle         [ &#39;normal&#39; | &#39;italic&#39; | &#39;oblique&#39;]</span>
<span class="sd">        text                       string</span>
<span class="sd">        transform                  a matplotlib.transform transformation instance</span>
<span class="sd">        usetex                     [True | False | None]</span>
<span class="sd">        variant                    [&#39;normal&#39; | &#39;small-caps&#39;]</span>
<span class="sd">        verticalalignment or va    [&#39;center&#39; | &#39;top&#39; | &#39;bottom&#39; | &#39;baseline&#39;]</span>
<span class="sd">        visible                    [True | False]</span>
<span class="sd">        weight or fontweight       [&#39;normal&#39; | &#39;bold&#39; | &#39;heavy&#39; | &#39;light&#39; |</span>
<span class="sd">                                    &#39;ultrabold&#39; | &#39;ultralight&#39;]</span>
<span class="sd">        wrap                       [True | False]</span>
<span class="sd">        x                          float</span>
<span class="sd">        y                          float</span>
<span class="sd">        zorder                     any number</span>
<span class="sd">        ========================== ================================================</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">plt_docstring_Line2D_kwargs</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Doc string</span>
<span class="sd">    </span>
<span class="sd">    http://matplotlib.org/api/lines_api.html#matplotlib.lines.Line2D</span>
<span class="sd">    </span>
<span class="sd">    https://raw.githubusercontent.com/matplotlib/matplotlib/master/doc/users/pyplot_tutorial.rst</span>
<span class="sd">    </span>

<span class="sd">    Here are the available :class:`~matplotlib.lines.Line2D` properties.</span>
<span class="sd">    **(note: list may be incomplete...compare with :ref:`plt.plot`)</span>

<span class="sd">    ======================  ==================================================</span>
<span class="sd">    Property                Value Type</span>
<span class="sd">    ======================  ==================================================</span>
<span class="sd">    alpha                   float</span>
<span class="sd">    animated                [True | False]</span>
<span class="sd">    antialiased or aa       [True | False]</span>
<span class="sd">    clip_box                a matplotlib.transform.Bbox instance</span>
<span class="sd">    clip_on                 [True | False]</span>
<span class="sd">    clip_path               a Path instance and a Transform instance, a Patch</span>
<span class="sd">    color or c              any matplotlib color</span>
<span class="sd">    contains                the hit testing function</span>
<span class="sd">    dash_capstyle           [``&#39;butt&#39;`` | ``&#39;round&#39;`` | ``&#39;projecting&#39;``]</span>
<span class="sd">    dash_joinstyle          [``&#39;miter&#39;`` | ``&#39;round&#39;`` | ``&#39;bevel&#39;``]</span>
<span class="sd">    dashes                  sequence of on/off ink in points</span>
<span class="sd">    data                    (np.array xdata, np.array ydata)</span>
<span class="sd">    figure                  a matplotlib.figure.Figure instance</span>
<span class="sd">    label                   any string</span>
<span class="sd">    linestyle or ls         [ ``&#39;-&#39;`` | ``&#39;--&#39;`` | ``&#39;-.&#39;`` | ``&#39;:&#39;`` | ``&#39;steps&#39;`` | ...]</span>
<span class="sd">    linewidth or lw         float value in points</span>
<span class="sd">    lod                     [True | False]</span>
<span class="sd">    marker                  [ ``&#39;+&#39;`` | ``&#39;,&#39;`` | ``&#39;.&#39;`` | ``&#39;1&#39;`` | ``&#39;2&#39;`` | ``&#39;3&#39;`` | ``&#39;4&#39;`` ]</span>
<span class="sd">    markeredgecolor or mec  any matplotlib color</span>
<span class="sd">    markeredgewidth or mew  float value in points</span>
<span class="sd">    markerfacecolor or mfc  any matplotlib color</span>
<span class="sd">    markersize or ms        float</span>
<span class="sd">    markevery               [ None | integer | (startind, stride) ]</span>
<span class="sd">    picker                  used in interactive line selection</span>
<span class="sd">    pickradius              the line pick selection radius</span>
<span class="sd">    solid_capstyle          [``&#39;butt&#39;`` | ``&#39;round&#39;`` | ``&#39;projecting&#39;``]</span>
<span class="sd">    solid_joinstyle         [``&#39;miter&#39;`` | ``&#39;round&#39;`` | ``&#39;bevel&#39;``]</span>
<span class="sd">    transform               a matplotlib.transforms.Transform instance</span>
<span class="sd">    visible                 [True | False]</span>
<span class="sd">    xdata                   np.array</span>
<span class="sd">    ydata                   np.array</span>
<span class="sd">    zorder                  any number</span>
<span class="sd">    ======================  ==================================================</span>
<span class="sd">    </span>
<span class="sd">    =====================================================================================   ===============================================================================================================================================</span>
<span class="sd">    Property                                                                                Description                                                                                                                                    </span>
<span class="sd">    =====================================================================================   ===============================================================================================================================================</span>
<span class="sd">    :meth:`agg_filter &lt;matplotlib.artist.Artist.set_agg_filter&gt;`                            unknown                                                                                                                                        </span>
<span class="sd">    :meth:`alpha &lt;matplotlib.artist.Artist.set_alpha&gt;`                                      float (0.0 transparent through 1.0 opaque)                                                                                                     </span>
<span class="sd">    :meth:`animated &lt;matplotlib.artist.Artist.set_animated&gt;`                                [True | False]                                                                                                                                 </span>
<span class="sd">    :meth:`antialiased &lt;matplotlib.lines.Line2D.set_antialiased&gt;` or aa                     [True | False]                                                                                                                                 </span>
<span class="sd">    :meth:`axes &lt;matplotlib.artist.Artist.set_axes&gt;`                                        an :class:`~matplotlib.axes.Axes` instance                                                                                                     </span>
<span class="sd">    :meth:`clip_box &lt;matplotlib.artist.Artist.set_clip_box&gt;`                                a :class:`matplotlib.transforms.Bbox` instance                                                                                                 </span>
<span class="sd">    :meth:`clip_on &lt;matplotlib.artist.Artist.set_clip_on&gt;`                                  [True | False]                                                                                                                                 </span>
<span class="sd">    :meth:`clip_path &lt;matplotlib.artist.Artist.set_clip_path&gt;`                              [ (:class:`~matplotlib.path.Path`, :class:`~matplotlib.transforms.Transform`) | :class:`~matplotlib.patches.Patch` | None ]                    </span>
<span class="sd">    :meth:`color &lt;matplotlib.lines.Line2D.set_color&gt;` or c                                  any matplotlib color                                                                                                                           </span>
<span class="sd">    :meth:`contains &lt;matplotlib.artist.Artist.set_contains&gt;`                                a callable function                                                                                                                            </span>
<span class="sd">    :meth:`dash_capstyle &lt;matplotlib.lines.Line2D.set_dash_capstyle&gt;`                       [&#39;butt&#39; | &#39;round&#39; | &#39;projecting&#39;]                                                                                                              </span>
<span class="sd">    :meth:`dash_joinstyle &lt;matplotlib.lines.Line2D.set_dash_joinstyle&gt;`                     [&#39;miter&#39; | &#39;round&#39; | &#39;bevel&#39;]                                                                                                                  </span>
<span class="sd">    :meth:`dashes &lt;matplotlib.lines.Line2D.set_dashes&gt;`                                     sequence of on/off ink in points                                                                                                               </span>
<span class="sd">    :meth:`drawstyle &lt;matplotlib.lines.Line2D.set_drawstyle&gt;`                               [&#39;default&#39; | &#39;steps&#39; | &#39;steps-pre&#39; | &#39;steps-mid&#39; | &#39;steps-post&#39;]                                                                               </span>
<span class="sd">    :meth:`figure &lt;matplotlib.artist.Artist.set_figure&gt;`                                    a :class:`matplotlib.figure.Figure` instance                                                                                                   </span>
<span class="sd">    :meth:`fillstyle &lt;matplotlib.lines.Line2D.set_fillstyle&gt;`                               [&#39;full&#39; | &#39;left&#39; | &#39;right&#39; | &#39;bottom&#39; | &#39;top&#39; | &#39;none&#39;]                                                                                        </span>
<span class="sd">    :meth:`gid &lt;matplotlib.artist.Artist.set_gid&gt;`                                          an id string                                                                                                                                   </span>
<span class="sd">    :meth:`label &lt;matplotlib.artist.Artist.set_label&gt;`                                      string or anything printable with &#39;%s&#39; conversion.                                                                                             </span>
<span class="sd">    :meth:`linestyle &lt;matplotlib.lines.Line2D.set_linestyle&gt;` or ls                         [&#39;solid&#39; | &#39;dashed&#39;, &#39;dashdot&#39;, &#39;dotted&#39; | (offset, on-off-dash-seq) | ``&#39;-&#39;`` | ``&#39;--&#39;`` | ``&#39;-.&#39;`` | ``&#39;:&#39;`` | ``&#39;None&#39;`` | ``&#39; &#39;`` | ``&#39;&#39;``]</span>
<span class="sd">    :meth:`linewidth &lt;matplotlib.lines.Line2D.set_linewidth&gt;` or lw                         float value in points                                                                                                                          </span>
<span class="sd">    :meth:`marker &lt;matplotlib.lines.Line2D.set_marker&gt;`                                     :mod:`A valid marker style &lt;matplotlib.markers&gt;`                                                                                               </span>
<span class="sd">    :meth:`markeredgecolor &lt;matplotlib.lines.Line2D.set_markeredgecolor&gt;` or mec            any matplotlib color                                                                                                                           </span>
<span class="sd">    :meth:`markeredgewidth &lt;matplotlib.lines.Line2D.set_markeredgewidth&gt;` or mew            float value in points                                                                                                                          </span>
<span class="sd">    :meth:`markerfacecolor &lt;matplotlib.lines.Line2D.set_markerfacecolor&gt;` or mfc            any matplotlib color                                                                                                                           </span>
<span class="sd">    :meth:`markerfacecoloralt &lt;matplotlib.lines.Line2D.set_markerfacecoloralt&gt;` or mfcalt   any matplotlib color                                                                                                                           </span>
<span class="sd">    :meth:`markersize &lt;matplotlib.lines.Line2D.set_markersize&gt;` or ms                       float                                                                                                                                          </span>
<span class="sd">    :meth:`markevery &lt;matplotlib.lines.Line2D.set_markevery&gt;`                               [None | int | length-2 tuple of int | slice | list/array of int | float | length-2 tuple of float]                                             </span>
<span class="sd">    :meth:`path_effects &lt;matplotlib.artist.Artist.set_path_effects&gt;`                        unknown                                                                                                                                        </span>
<span class="sd">    :meth:`picker &lt;matplotlib.lines.Line2D.set_picker&gt;`                                     float distance in points or callable pick function ``fn(artist, event)``                                                                       </span>
<span class="sd">    :meth:`pickradius &lt;matplotlib.lines.Line2D.set_pickradius&gt;`                             float distance in points                                                                                                                       </span>
<span class="sd">    :meth:`rasterized &lt;matplotlib.artist.Artist.set_rasterized&gt;`                            [True | False | None]                                                                                                                          </span>
<span class="sd">    :meth:`sketch_params &lt;matplotlib.artist.Artist.set_sketch_params&gt;`                      unknown                                                                                                                                        </span>
<span class="sd">    :meth:`snap &lt;matplotlib.artist.Artist.set_snap&gt;`                                        unknown                                                                                                                                        </span>
<span class="sd">    :meth:`solid_capstyle &lt;matplotlib.lines.Line2D.set_solid_capstyle&gt;`                     [&#39;butt&#39; | &#39;round&#39; |  &#39;projecting&#39;]                                                                                                             </span>
<span class="sd">    :meth:`solid_joinstyle &lt;matplotlib.lines.Line2D.set_solid_joinstyle&gt;`                   [&#39;miter&#39; | &#39;round&#39; | &#39;bevel&#39;]                                                                                                                  </span>
<span class="sd">    :meth:`transform &lt;matplotlib.lines.Line2D.set_transform&gt;`                               a :class:`matplotlib.transforms.Transform` instance                                                                                            </span>
<span class="sd">    :meth:`url &lt;matplotlib.artist.Artist.set_url&gt;`                                          a url string                                                                                                                                   </span>
<span class="sd">    :meth:`visible &lt;matplotlib.artist.Artist.set_visible&gt;`                                  [True | False]                                                                                                                                 </span>
<span class="sd">    :meth:`xdata &lt;matplotlib.lines.Line2D.set_xdata&gt;`                                       1D array                                                                                                                                       </span>
<span class="sd">    :meth:`ydata &lt;matplotlib.lines.Line2D.set_ydata&gt;`                                       1D array                                                                                                                                       </span>
<span class="sd">    :meth:`zorder &lt;matplotlib.artist.Artist.set_zorder&gt;`                                    any number                                                                                                                                     </span>
<span class="sd">    =====================================================================================   ===============================================================================================================================================</span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span>
<span class="c1">#%% === post July 2016 ===</span>
    
<span class="c1">#%% -- some wrappers... ------</span>
<span class="k">def</span> <span class="nf">cursor</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">horizOn</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">vertOn</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">useblit</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span>
           <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="o">**</span><span class="n">lineprops</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; My wrapper to mpl.widgets.Cursor</span>
<span class="sd">    </span>
<span class="sd">    See http://matplotlib.org/examples/widgets/index.html for more</span>
<span class="sd">    mpl widgets.</span>
<span class="sd">    </span>
<span class="sd">    For line properties, see </span>
<span class="sd">    http://matplotlib.org/api/lines_api.html#matplotlib.lines.Line2D</span>
<span class="sd">    </span>
<span class="sd">    ::</span>
<span class="sd">    </span>
<span class="sd">        def __init__(self, ax, horizOn=True, vertOn=True, useblit=False,</span>
<span class="sd">                 **lineprops):</span>
<span class="sd">                 </span>
<span class="sd">                 </span>
<span class="sd">    Docstring from original</span>
<span class="sd">    --------------------------</span>
<span class="sd">    A horizontal and vertical line that spans the axes and moves with</span>
<span class="sd">    the pointer.  You can turn off the hline or vline respectively with</span>
<span class="sd">    the following attributes:</span>

<span class="sd">      *horizOn*</span>
<span class="sd">        Controls the visibility of the horizontal line</span>

<span class="sd">      *vertOn*</span>
<span class="sd">        Controls the visibility of the horizontal line</span>

<span class="sd">    and the visibility of the cursor itself with the *visible* attribute.</span>

<span class="sd">    For the cursor to remain responsive you must keep a reference to</span>
<span class="sd">    it.</span>

<span class="sd">    History</span>
<span class="sd">    --------</span>
<span class="sd">    Created 07/26/2016</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">matplotlib.widgets</span> <span class="kn">import</span> <span class="n">Cursor</span> <span class="k">as</span> <span class="n">_Cursor</span>
    <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
        
    <span class="c1"># return since docstring indicates, </span>
    <span class="c1"># &quot;For the cursor to remain responsive you must keep a reference to it.&quot;</span>
    <span class="c1"># otherwise,lines won&#39;t show up</span>
    <span class="k">return</span> <span class="n">_Cursor</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span><span class="n">horizOn</span><span class="p">,</span><span class="n">vertOn</span><span class="p">,</span><span class="n">useblit</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">lw</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span><span class="o">**</span><span class="n">lineprops</span><span class="p">)</span>
    
    

<span class="k">def</span> <span class="nf">datacursor</span><span class="p">(</span><span class="n">artists</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">draggable</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">display</span><span class="o">=</span><span class="s1">&#39;multiple&#39;</span><span class="p">,</span>
               <span class="n">arrowprops</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; A direct wrapper to ``mpldatacursor.datacursor`` (create 07/26/20261)</span>
<span class="sd">    </span>
<span class="sd">    Usage</span>
<span class="sd">    -----</span>
<span class="sd">    &gt;&gt;&gt; datacursor(</span>
<span class="sd">    &gt;&gt;&gt;     formatter=&#39;(i, j) = ({i}, {j})\\nz = {z:.2f}&#39;.format,</span>
<span class="sd">    &gt;&gt;&gt;     draggable=True,</span>
<span class="sd">    &gt;&gt;&gt;     axes=plt.gca(),</span>
<span class="sd">    &gt;&gt;&gt;     arrowprops=dict(arrowstyle=&#39;-&gt;&#39;, connectionstyle=&#39;arc3,rad=0&#39;,</span>
<span class="sd">    &gt;&gt;&gt;     edgecolor=&#39;magenta&#39;), display=display)</span>
<span class="sd">    </span>
<span class="sd">    Below is docstring from original</span>
<span class="sd">    </span>
<span class="sd">    ------</span>
<span class="sd">    </span>
<span class="sd">    Create an interactive data cursor for the specified artists or specified</span>
<span class="sd">    axes. The data cursor displays information about a selected artist in a</span>
<span class="sd">    &quot;popup&quot; annotation box.</span>

<span class="sd">    If a specific sequence of artists is given, only the specified artists will</span>
<span class="sd">    be interactively selectable.  Otherwise, all manually-plotted artists in</span>
<span class="sd">    *axes* will be used (*axes* defaults to all axes in all figures).</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    artists : a matplotlib artist or sequence of artists, optional</span>
<span class="sd">        The artists to make selectable and display information for. If this is</span>
<span class="sd">        not specified, then all manually plotted artists in `axes` will be</span>
<span class="sd">        used.</span>
<span class="sd">    axes : a matplotlib axes of sequence of axes, optional</span>
<span class="sd">        The axes to selected artists from if a sequence of artists is not</span>
<span class="sd">        specified.  If `axes` is not specified, then all available axes in all</span>
<span class="sd">        figures will be used.</span>
<span class="sd">    tolerance : number, optional</span>
<span class="sd">        The radius (in points) that the mouse click must be within to select</span>
<span class="sd">        the artist. Default: 5 points.</span>
<span class="sd">    formatter : callable, optional</span>
<span class="sd">        A function that accepts arbitrary kwargs and returns a string that will</span>
<span class="sd">        be displayed with annotate. Often, it is convienent to pass in the</span>
<span class="sd">        format method of a template string, e.g.</span>
<span class="sd">        ``formatter=&quot;{label}&quot;.format``.</span>
<span class="sd">        Keyword arguments passed in to the `formatter` function:</span>
<span class="sd">            `x`, `y` : floats</span>
<span class="sd">                The x and y data coordinates of the clicked point</span>
<span class="sd">            `event` : a matplotlib ``PickEvent``</span>
<span class="sd">                The pick event that was fired (note that the selected</span>
<span class="sd">                artist can be accessed through ``event.artist``).</span>
<span class="sd">            `label` : string or None</span>
<span class="sd">                The legend label of the selected artist.</span>
<span class="sd">            `ind` : list of ints or None</span>
<span class="sd">                If the artist has &quot;subitems&quot; (e.g. points in a scatter or</span>
<span class="sd">                line plot), this will be a list of the item(s) that were</span>
<span class="sd">                clicked on.  If the artist does not have &quot;subitems&quot;, this</span>
<span class="sd">                will be None. Note that this is always a list, even when</span>
<span class="sd">                a single item is selected.</span>
<span class="sd">        Some selected artists may supply additional keyword arguments that</span>
<span class="sd">        are not always present, for example:</span>
<span class="sd">            `z` : number</span>
<span class="sd">                The &quot;z&quot; (usually color or array) value, if present. For an</span>
<span class="sd">                ``AxesImage`` (as created by ``imshow``), this will be the</span>
<span class="sd">                uninterpolated array value at the point clicked. For a</span>
<span class="sd">                ``PathCollection`` (as created by ``scatter``) this will be the</span>
<span class="sd">                &quot;c&quot; value if an array was passed to &quot;c&quot;.</span>
<span class="sd">            `i`, `j` : ints</span>
<span class="sd">                The row, column indicies of the selected point for an</span>
<span class="sd">                ``AxesImage`` (as created by ``imshow``)</span>
<span class="sd">            `s` : number</span>
<span class="sd">                The size of the selected item in a ``PathCollection`` if a size</span>
<span class="sd">                array is specified.</span>
<span class="sd">            `c` : number</span>
<span class="sd">                The array value displayed as color for a ``PathCollection``</span>
<span class="sd">                if a &quot;c&quot; array is specified (identical to &quot;z&quot;).</span>
<span class="sd">            `point_label` : list</span>
<span class="sd">                If `point_labels` is given when the data cursor is initialized</span>
<span class="sd">                and the artist has &quot;subitems&quot;, this will be a list of the items</span>
<span class="sd">                of `point_labels` that correspond to the selected artists.</span>
<span class="sd">                Note that this is always a list, even when a single artist is</span>
<span class="sd">                selected.</span>
<span class="sd">            `width`, `height`, `top`, `bottom` : numbers</span>
<span class="sd">                The parameters for ``Rectangle`` artists (e.g. bar plots).</span>
<span class="sd">    point_labels : sequence or dict, optional</span>
<span class="sd">        For artists with &quot;subitems&quot; (e.g. Line2D&#39;s), the item(s) of</span>
<span class="sd">        `point_labels` corresponding to the selected &quot;subitems&quot; of the artist</span>
<span class="sd">        will be passed into the formatter function as the &quot;point_label&quot; kwarg.</span>
<span class="sd">        If a single sequence is given, it will be used for all artists with</span>
<span class="sd">        &quot;subitems&quot;. Alternatively, a dict of artist:sequence pairs may be given</span>
<span class="sd">        to match an artist to the correct series of point labels.</span>
<span class="sd">    display : {&quot;one-per-axes&quot;, &quot;single&quot;, &quot;multiple&quot;}, optional</span>
<span class="sd">        Controls whether more than one annotation box will be shown.</span>
<span class="sd">        Default: &quot;one-per-axes&quot;</span>
<span class="sd">    draggable : boolean, optional</span>
<span class="sd">        Controls whether or not the annotation box will be interactively</span>
<span class="sd">        draggable to a new location after being displayed. Defaults to False.</span>
<span class="sd">    hover : boolean, optional</span>
<span class="sd">        If True, the datacursor will &quot;pop up&quot; when the mouse hovers over an</span>
<span class="sd">        artist.  Defaults to False.  Enabling hover also sets</span>
<span class="sd">        `display=&quot;single&quot;` and `draggable=False`.</span>
<span class="sd">    props_override : function, optional</span>
<span class="sd">        If specified, this function customizes the parameters passed into the</span>
<span class="sd">        formatter function and the x, y location that the datacursor &quot;pop up&quot;</span>
<span class="sd">        &quot;points&quot; to.  This is often useful to make the annotation &quot;point&quot; to a</span>
<span class="sd">        specific side or corner of an artist, regardless of the position</span>
<span class="sd">        clicked. The function is passed the same kwargs as the `formatter`</span>
<span class="sd">        function and is expected to return a dict with at least the keys &quot;x&quot;</span>
<span class="sd">        and &quot;y&quot; (and probably several others).</span>
<span class="sd">        Expected call signature: `props_dict = props_override(**kwargs)`</span>
<span class="sd">    keybindings : boolean or dict, optional</span>
<span class="sd">        By default, the keys &quot;d&quot; and &quot;t&quot; will be bound to deleting/hiding all</span>
<span class="sd">        annotation boxes and toggling interactivity for datacursors,</span>
<span class="sd">        respectively.  If keybindings is False, the ability to hide/toggle</span>
<span class="sd">        datacursors interactively will be disabled. Alternatively, a dict of</span>
<span class="sd">        the form {&#39;hide&#39;:&#39;somekey&#39;, &#39;toggle&#39;:&#39;somekey&#39;} may specified to</span>
<span class="sd">        customize the keyboard shortcuts.</span>
<span class="sd">    date_format : string, optional</span>
<span class="sd">        The strftime-style formatting string for dates. Used only if the x or y</span>
<span class="sd">        axes have been set to display dates. Defaults to &quot;%x %X&quot;.</span>
<span class="sd">    display_button: int, optional</span>
<span class="sd">        The mouse button that will triggers displaying an annotation box.</span>
<span class="sd">        Defaults to 1, for left-clicking. (Common options are 1:left-click,</span>
<span class="sd">        2:middle-click, 3:right-click)</span>
<span class="sd">    hide_button: int or None, optional</span>
<span class="sd">        The mouse button that triggers hiding the selected annotation box.</span>
<span class="sd">        Defaults to 3, for right-clicking. (Common options are 1:left-click,</span>
<span class="sd">        2:middle-click, 3:right-click, None:hiding disabled)</span>
<span class="sd">    keep_inside : boolean, optional</span>
<span class="sd">        Whether or not to adjust the x,y offset to keep the text box inside the</span>
<span class="sd">        figure. This option has no effect on draggable datacursors. Defaults to</span>
<span class="sd">        True. Note: Currently disabled on OSX and NbAgg/notebook backends.</span>
<span class="sd">    **kwargs : additional keyword arguments, optional</span>
<span class="sd">        Additional keyword arguments are passed on to annotate.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dc : A ``mpldatacursor.DataCursor`` instance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">arrowprops</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">arrowprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span><span class="o">=</span><span class="s1">&#39;-&gt;&#39;</span><span class="p">,</span>
                          <span class="n">connectionstyle</span><span class="o">=</span><span class="s1">&#39;arc3,rad=0&#39;</span><span class="p">,</span>
                          <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">mpldatacursor</span>
    <span class="n">dc</span> <span class="o">=</span> <span class="n">mpldatacursor</span><span class="o">.</span><span class="n">datacursor</span><span class="p">(</span><span class="n">artists</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">axes</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">arrowprops</span><span class="o">=</span><span class="n">arrowprops</span><span class="p">,</span>
                             <span class="n">display</span><span class="o">=</span><span class="n">display</span><span class="p">,</span><span class="n">draggable</span><span class="o">=</span><span class="n">draggable</span><span class="p">,</span>
                             <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dc</span>
<span class="c1">#%% === my lazy functions ===</span>
<span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;my lazy plot, where new figure is generated (created 07/20/2016)</span>
<span class="sd">    </span>
<span class="sd">    kwargs accepts stuffs to plt.plot</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">figure</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="c1">#%% === frequently used functions ===</span>
<span class="k">class</span> <span class="nc">Formatter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; My version of impixelinfo (used in ``imtak``)</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    z_is_int : bool (default=False)</span>
<span class="sd">        Display z value as integer (Feature added 10/28/2015)</span>
<span class="sd">    flag_one_based : bool (default=False)</span>
<span class="sd">        Show x,y info as 1-based indexing like Matlab (Feature added 10/28/2015)</span>

<span class="sd">    Ref</span>
<span class="sd">    ---</span>
<span class="sd">    I got this beautiful shit from stackoverflow:</span>

<span class="sd">    http://stackoverflow.com/questions/27704490/interactive-pixel-information-of-an-image-in-python</span>

<span class="sd">    Update</span>
<span class="sd">    ------</span>
<span class="sd">    06/02/2016 - impixelinfo functionality now available as default in imshow.</span>
<span class="sd">    code modified accordingly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">im</span><span class="p">,</span> <span class="n">z_int</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">one_based_indexing</span> <span class="o">=</span> <span class="bp">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">im</span> <span class="o">=</span> <span class="n">im</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z_int</span> <span class="o">=</span> <span class="n">z_int</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">one_based_indexing</span> <span class="o">=</span> <span class="n">one_based_indexing</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">im</span><span class="o">.</span><span class="n">get_array</span><span class="p">()[</span><span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>

        <span class="c1"># the +0.5 offset makes the cursor location more accurate when hovering</span>
        <span class="c1"># over the pixel location</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">one_based_indexing</span><span class="p">:</span>
            <span class="n">xx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mf">1.5</span><span class="p">)</span> <span class="c1"># type cast to int</span>
            <span class="n">yy</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="o">+</span><span class="mf">1.5</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">+.</span><span class="mi">5</span><span class="p">)</span>
            <span class="n">yy</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="o">+.</span><span class="mi">5</span><span class="p">)</span>

<span class="c1">#        return &#39;x={:.01f}, y={:.01f}, z={:.01f}&#39;.format(x, y, z)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_int</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;(x={:d}, y={:d}), z={:3d}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
            <span class="c1">#return &#39;(x={:d}, y={:d}), z={:3d}&#39;.format(int(x), int(y), z)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#return &#39;( i , j ) = ({:d}, {:d})    {:5.2e}&#39;.format(int(y), int(x), z)</span>
            <span class="c1">#return &#39;( i , j ) = ({:d}, {:d})    {:.2f}&#39;.format(int(y), int(x), z)</span>
            <span class="c1">#return &#39;( i , j ) = ({:d}, {:d})    {:.2f}&#39;.format(xx,yy, z)</span>
            <span class="k">return</span> <span class="s1">&#39;( i , j ) = [{:d}, {:d}]   &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">yy</span><span class="p">,</span><span class="n">xx</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">figure</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span><span class="n">fignum</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; My figure generator with control over figure size and position</span>

<span class="sd">    Usage</span>
<span class="sd">    -----</span>
<span class="sd">    &gt;&gt;&gt; fig = tw.figure(&#39;full&#39;)</span>

<span class="sd">    Parameter</span>
<span class="sd">    ---------</span>
<span class="sd">    pos : string or tuple of (x,y,dx,dy) (default=&#39;default&#39;, which gives default screensize)</span>
<span class="sd">        If a **tuple**, should be length 4 of ``(x,y,dx,dy)``, where</span>

<span class="sd">         - x = xstart position</span>
<span class="sd">         - y = ystart position</span>
<span class="sd">         - dx = xlength</span>
<span class="sd">         - dy = ylength</span>

<span class="sd">        If a **string**, the following options are recognized:</span>

<span class="sd">        - ``&#39;f&#39;`` or ``&#39;full&#39;`` (full screen)</span>
<span class="sd">        - ``&#39;l&#39;`` or ``&#39;left&#39;`` (left half of screen)</span>
<span class="sd">        - ``&#39;r&#39;`` or ``&#39;right&#39;`` (right half of screen)</span>
<span class="sd">        - ``&#39;t&#39;`` or ``&#39;top&#39;`` (top half of screen)</span>
<span class="sd">        - ``&#39;b&#39;`` or ``&#39;bottom&#39;`` (bottom half of screen)</span>
<span class="sd">        - ``&#39;tl&#39;`` or ``&#39;topleft&#39;``</span>
<span class="sd">        - ``&#39;tr&#39;`` or ``&#39;topright&#39;``</span>
<span class="sd">        - ``&#39;bl&#39;`` or ``&#39;bottomleft&#39;``</span>
<span class="sd">        - ``&#39;br&#39;`` or ``&#39;bottomright&#39;``</span>

<span class="sd">    fignum : int (optional)</span>
<span class="sd">        assign figure number (optional)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    figure number</span>

<span class="sd">    Reference</span>
<span class="sd">    ---------</span>
<span class="sd">    - http://doc.qt.io/qt-4.8/qwidget.html for api</span>
<span class="sd">    - http://stackoverflow.com/questions/7449585/how-do-you-set-the-absolute-position-of-figure-windows-with-matplotlib</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fignum</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">fignum</span><span class="p">)</span>
    <span class="c1">#plt.plot()</span>
        
    <span class="n">fig_set_geom</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
    <span class="c1">#%%</span>
    <span class="k">return</span> <span class="n">fig</span>

<span class="k">def</span> <span class="nf">fig_set_geom</span><span class="p">(</span><span class="n">pos</span> <span class="o">=</span> <span class="n">_screen_default</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Set figure dimension</span>

<span class="sd">    Usage</span>
<span class="sd">    -----</span>
<span class="sd">    &gt;&gt;&gt; plt.figure()</span>
<span class="sd">    &gt;&gt;&gt; tw.fig_set_geom(&#39;full&#39;)</span>

<span class="sd">    Parameter</span>
<span class="sd">    ---------</span>
<span class="sd">    pos : string or tuple of (x,y,dx,dy) (default=&#39;default&#39;, which gives default screensize)</span>
<span class="sd">        If a **tuple**, should be length 4 of ``(x,y,dx,dy)``, where</span>

<span class="sd">         - x = xstart position</span>
<span class="sd">         - y = ystart position</span>
<span class="sd">         - dx = xlength</span>
<span class="sd">         - dy = ylength</span>

<span class="sd">        If a **string**, the following options are recognized:</span>

<span class="sd">        - ``&#39;f&#39;`` or ``&#39;full&#39;`` (full screen)</span>
<span class="sd">        - ``&#39;l&#39;`` or ``&#39;left&#39;`` (left half of screen)</span>
<span class="sd">        - ``&#39;r&#39;`` or ``&#39;right&#39;`` (right half of screen)</span>
<span class="sd">        - ``&#39;t&#39;`` or ``&#39;top&#39;`` (top half of screen)</span>
<span class="sd">        - ``&#39;b&#39;`` or ``&#39;bottom&#39;`` (bottom half of screen)</span>
<span class="sd">        - ``&#39;tl&#39;`` or ``&#39;topleft&#39;``</span>
<span class="sd">        - ``&#39;tr&#39;`` or ``&#39;topright&#39;``</span>
<span class="sd">        - ``&#39;bl&#39;`` or ``&#39;bottomleft&#39;``</span>
<span class="sd">        - ``&#39;br&#39;`` or ``&#39;bottomright&#39;``</span>

<span class="sd">    Reference</span>
<span class="sd">    ---------</span>
<span class="sd">    - http://doc.qt.io/qt-4.8/qwidget.html for api</span>
<span class="sd">    - http://stackoverflow.com/questions/7449585/how-do-you-set-the-absolute-position-of-figure-windows-with-matplotlib</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">pos</span> <span class="ow">is</span> <span class="s1">&#39;default&#39;</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">_screen_default</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span><span class="s1">&#39;full&#39;</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">_screen_full</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;f2&#39;</span><span class="p">,</span><span class="s1">&#39;full2&#39;</span><span class="p">):</span>
            <span class="c1"># added 10/05/2016 - fullscreen on my main monitor</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">_screen_full2</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;l&#39;</span><span class="p">,</span><span class="s1">&#39;left&#39;</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">_screen_left</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;right&#39;</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">_screen_right</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">,</span><span class="s1">&#39;top&#39;</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">_screen_top</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;bottom&#39;</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">_screen_bottom</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;tl&#39;</span><span class="p">,</span><span class="s1">&#39;topleft&#39;</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">_screen_tl</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">,</span><span class="s1">&#39;topright&#39;</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">_screen_tr</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;bl&#39;</span><span class="p">,</span><span class="s1">&#39;bottomleft&#39;</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">_screen_bl</span>
        <span class="k">elif</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;br&#39;</span><span class="p">,</span><span class="s1">&#39;bottomright&#39;</span><span class="p">):</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">_screen_br</span>
    
    <span class="k">try</span><span class="p">:</span> <span class="c1">#added this 08/22/2016 to run on non-interactive server</span>
        <span class="n">mngr</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_current_fig_manager</span><span class="p">()</span>
        <span class="n">mngr</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="o">*</span><span class="n">pos</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">err</span><span class="p">:</span>
        <span class="n">str_warning</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Assign figure-size using pyplot&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">str_warning</span><span class="p">)</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
        <span class="n">x_len</span> <span class="o">=</span> <span class="n">pos</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">/</span><span class="n">fig</span><span class="o">.</span><span class="n">dpi</span> <span class="c1"># &lt;- convert from pixel to inches</span>
        <span class="n">y_len</span> <span class="o">=</span> <span class="n">pos</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">/</span><span class="n">fig</span><span class="o">.</span><span class="n">dpi</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="n">x_len</span><span class="p">,</span><span class="n">y_len</span><span class="p">,</span><span class="n">forward</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">fig_get_geom</span><span class="p">(</span><span class="n">as_ndarray</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Get window geometry as either length 4 tuple or ndarray</span>

<span class="sd">    Parameters</span>
<span class="sd">    ------------</span>
<span class="sd">    as_ndarray : bool (default = True)</span>
<span class="sd">        Return as ndarray (if False, will return a tuple)</span>

<span class="sd">    Returns</span>
<span class="sd">    ---------</span>
<span class="sd">    If a **tuple**, should be length 4 of ``(x,y,dx,dy)``, where</span>

<span class="sd">         - x = xstart position</span>
<span class="sd">         - y = ystart position</span>
<span class="sd">         - dx = xlength</span>
<span class="sd">         - dy = ylength</span>

<span class="sd">    If an **ndarray**, an array of shape [4,] will be returned</span>

<span class="sd">    The below source code should clarify wtf i mean</span>

<span class="sd">    .. code:: python</span>

<span class="sd">        if as_ndarray:</span>
<span class="sd">            return np.array([x,y,dx,dy])</span>
<span class="sd">        else:</span>
<span class="sd">            return x,y,dx,dy</span>

<span class="sd">    Reference</span>
<span class="sd">    ---------</span>
<span class="sd">    - http://doc.qt.io/qt-4.8/qwidget.html for api</span>
<span class="sd">    - http://stackoverflow.com/questions/7449585/how-do-you-set-the-absolute-position-of-figure-windows-with-matplotlib</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mngr</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_current_fig_manager</span><span class="p">()</span>
    <span class="n">geom</span> <span class="o">=</span> <span class="n">mngr</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
    <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">dx</span><span class="p">,</span><span class="n">dy</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">getRect</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">as_ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">dx</span><span class="p">,</span><span class="n">dy</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">dx</span><span class="p">,</span><span class="n">dy</span>
        
        
<span class="k">def</span> <span class="nf">purge</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; My lazy close all &quot;&quot;&quot;</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">imexp</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Fullscreen on my secondary monitor (10/01/2015)&quot;&quot;&quot;</span>
    <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">dx</span><span class="p">,</span><span class="n">dy</span><span class="o">=</span><span class="n">_screen_full</span>
    <span class="n">mngr</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_current_fig_manager</span><span class="p">()</span>
    <span class="n">mngr</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">dx</span><span class="p">,</span><span class="n">dy</span><span class="p">)</span>
<span class="c1">#%% === statistics related plots ===</span>
<span class="k">def</span> <span class="nf">get_fs_pvalue_ranksum_indices</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">scores</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span><span class="n">impute</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">corr_type</span><span class="o">=</span><span class="s1">&#39;pearson&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; My &quot;quick&quot; routine for getting feature selection</span>

<span class="sd">    Usage</span>
<span class="sd">    -----</span>
<span class="sd">    &gt;&gt;&gt; X,y,df = twio.get_tbi_connectomes(return_all_scores=True)</span>
<span class="sd">    &gt;&gt;&gt; X /= X.max(axis=0)</span>
<span class="sd">    &gt;&gt;&gt; X[np.isnan(X) | np.isinf(X)] = 0</span>
<span class="sd">    &gt;&gt;&gt;</span>
<span class="sd">    &gt;&gt;&gt; scores = df.ix[:,-11:]</span>
<span class="sd">    &gt;&gt;&gt; idx_fs, idx_fs_vec, inv_fs = util.get_fs_pvalue_ranksum_indices(X,scores,k=1000)</span>
<span class="sd">    &gt;&gt;&gt;</span>
<span class="sd">    &gt;&gt;&gt; X_fs = X[:,idx_fs]</span>

<span class="sd">    History</span>
<span class="sd">    --------</span>
<span class="sd">    - updated 02/23/2016: added option ``corr_type`` with ``&#39;pearson&#39;`` as</span>
<span class="sd">      default (for backward compatibility)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n</span><span class="p">,</span><span class="n">p</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span>
    <span class="n">idx_ranking</span> <span class="o">=</span> <span class="n">get_pvalue_ranksum</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">scores</span><span class="p">,</span><span class="n">impute</span><span class="p">,</span><span class="n">corr_type</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># sort the index for consistency</span>
    <span class="n">idx_fs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">idx_ranking</span><span class="p">[:</span><span class="n">k</span><span class="p">])</span>  <span class="c1"># select top-k features</span>

    <span class="n">idx_fs_vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">idx_fs_vec</span><span class="p">[</span><span class="n">idx_fs</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="c1"># &quot;inverse-transform&quot; operator to &quot;undo&quot; feature selection</span>
    <span class="n">inv_fs</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">inverse_fs_transform</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">idx_fs</span><span class="p">,</span> <span class="n">n_feat</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">idx_fs</span><span class="p">,</span> <span class="n">idx_fs_vec</span><span class="p">,</span> <span class="n">inv_fs</span>


<span class="k">def</span> <span class="nf">plt_ttest_boxplot_H</span><span class="p">(</span><span class="n">H</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">threshold</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span><span class="n">show_rugs</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Plot boxplots of NMF embedding coefficinets across two populations</span>
<span class="sd">    </span>
<span class="sd">    Note: to avoid cluttering the figure canvas, max-number of boxplots at 64</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    H : ndarray</span>
<span class="sd">        Array of shape=(num_samples,num_features)</span>
<span class="sd">    y : ndarray</span>
<span class="sd">        Binary label array</span>
<span class="sd">    show_rugs : bool</span>
<span class="sd">        Show rugs (scatterplots of &quot;x&quot; marks)</span>
<span class="sd">    figsize : string</span>
<span class="sd">        Argument to tw.fig_set_geom</span>
<span class="sd">        </span>
<span class="sd">    History</span>
<span class="sd">    --------</span>
<span class="sd">    - 08/11/2016 -- added option ``figsize``</span>
<span class="sd">    - 07/25/2016 -- added option ``show_rugs``</span>
<span class="sd">    - 06/20/2016 -- imported from my old NMF project. made few updates as well</span>
<span class="sd">    - 02/05/2016: ylim adjusted to ignore outlier</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">tstats</span><span class="p">,</span><span class="n">pval</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">ttest_fdr_corrected</span><span class="p">(</span><span class="n">H</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
    <span class="n">idx_rej</span> <span class="o">=</span> <span class="p">(</span><span class="n">pval</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">plt_get_nrow_ncol</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
        <span class="n">fsize</span><span class="o">=</span><span class="mi">12</span>
        <span class="k">if</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">:</span>               <span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="mi">3</span>
        <span class="k">elif</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>  <span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="mi">5</span>
        <span class="k">elif</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">13</span><span class="p">):</span>  <span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span><span class="mi">4</span>
        <span class="k">elif</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">16</span><span class="p">):</span> <span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span><span class="mi">5</span>
        <span class="k">elif</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">21</span><span class="p">):</span> <span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span><span class="mi">5</span>
        <span class="k">elif</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span><span class="mi">26</span><span class="p">):</span> <span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span><span class="mi">5</span>
        <span class="k">elif</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span><span class="mi">37</span><span class="p">):</span> <span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span><span class="mi">6</span>
        <span class="k">elif</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">37</span><span class="p">,</span><span class="mi">50</span><span class="p">):</span> <span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span><span class="p">,</span><span class="n">fsize</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span>
        <span class="k">elif</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">65</span><span class="p">):</span> <span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span><span class="p">,</span><span class="n">fsize</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span>
        <span class="k">elif</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span><span class="mi">90</span><span class="p">):</span> <span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span><span class="p">,</span><span class="n">fsize</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span>
        <span class="k">else</span><span class="p">:</span>                   <span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span><span class="p">,</span><span class="n">fsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span>
        <span class="k">return</span> <span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span><span class="p">,</span><span class="n">fsize</span>
    <span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span><span class="p">,</span><span class="n">fsize</span> <span class="o">=</span> <span class="n">plt_get_nrow_ncol</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

    <span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="p">)</span>
    <span class="c1">#fig,ax = plt.subplots(4,4)</span>
    <span class="c1">#ax.ravel()</span>
    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">idx</span> <span class="o">&gt;</span> <span class="mi">99</span><span class="p">:</span> 
            <span class="k">break</span> <span class="c1"># max subplots at 64</span>
    <span class="c1">#    if idx &gt; 4:</span>
    <span class="c1">#        break</span>
    <span class="c1">#    if 1:#idx_rej[idx]:</span>
        <span class="n">n1</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span><span class="o">==+</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">n2</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span><span class="o">==-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">xx1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">n1</span><span class="p">)</span>
        <span class="n">xx2</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">n2</span><span class="p">)</span>

        <span class="n">yy1</span> <span class="o">=</span> <span class="n">H</span><span class="p">[</span><span class="n">y</span><span class="o">==+</span><span class="mi">1</span><span class="p">,</span><span class="n">idx</span><span class="p">]</span>
        <span class="n">yy2</span> <span class="o">=</span> <span class="n">H</span><span class="p">[</span><span class="n">y</span><span class="o">==-</span><span class="mi">1</span><span class="p">,</span><span class="n">idx</span><span class="p">]</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">nrow</span><span class="p">,</span><span class="n">ncol</span><span class="p">,</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1">#plt.boxplot([yy1,yy2],positions=[1,2])</span>
        <span class="c1"># http://stackoverflow.com/questions/22028064/matplotlib-boxplot-without-outliers</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">([</span><span class="n">yy1</span><span class="p">,</span><span class="n">yy2</span><span class="p">],</span><span class="n">positions</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span><span class="n">showfliers</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
        <span class="n">ylim</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
        <span class="c1"># overlay scatter-plot</span>
        <span class="k">if</span> <span class="n">show_rugs</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">xx1</span><span class="p">,</span><span class="n">yy1</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">marker</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span> <span class="c1"># disease group (+1)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">xx2</span><span class="p">,</span><span class="n">yy2</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="n">marker</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span> <span class="c1"># control group (-1)</span>
            <span class="c1">#plt.xlim((-1,4))</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">ylim</span><span class="p">)</span> <span class="c1"># undo ylim change from scatterplot</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;t={:3.2e} (p={:3.2e})&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tstats</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span><span class="n">pval</span><span class="p">[</span><span class="n">idx</span><span class="p">]),</span>
                  <span class="n">fontsize</span><span class="o">=</span><span class="n">fsize</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
        
        <span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span> <span class="c1"># change xy-label tick sizes</span>
        <span class="k">if</span> <span class="n">idx_rej</span><span class="p">[</span><span class="n">idx</span><span class="p">]:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_axis_bgcolor</span><span class="p">(</span><span class="s1">&#39;#ccffcc&#39;</span><span class="p">)</span>
        <span class="c1">#plt.title(idx)</span>
<span class="c1">#    plt.pause(0.05)</span>



<span class="k">def</span> <span class="nf">plt_scatter_2group</span><span class="p">(</span><span class="n">H</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">w</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update 02/16/2016: added 3rd argument w, which represents hyperplane</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">r</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
        <span class="c1">#%%</span>
        <span class="n">figure</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span> <span class="n">H</span><span class="p">[</span><span class="n">y</span><span class="o">==+</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">H</span><span class="p">[</span><span class="n">y</span><span class="o">==+</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span> <span class="n">H</span><span class="p">[</span><span class="n">y</span><span class="o">==-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">H</span><span class="p">[</span><span class="n">y</span><span class="o">==-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">w</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            http://scikit-learn.org/stable/auto_examples/svm/</span>
<span class="sd">                plot_separating_hyperplane.html</span>
<span class="sd">            http://stackoverflow.com/questions/10953997/</span>
<span class="sd">                python-scikits-learn-separating-hyperplane-equation</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">min_x</span><span class="p">,</span><span class="n">max_x</span> <span class="o">=</span> <span class="n">H</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">H</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="c1">#            min_y,max_y = H[:,1].min(), H[:,1].max()</span>
<span class="c1">#            xx = np.linspace(min_x,max_x,101)</span>
            <span class="n">xx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">101</span><span class="p">)</span>
<span class="c1">#            yy = np.linspace(min_y,max_y,101)</span>
<span class="c1">#            XX,YY = np.meshgrid(xx,yy)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">==</span> <span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">b</span> <span class="o">=</span> <span class="o">-</span><span class="n">w</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">/</span><span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">w</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">z</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">xx</span> <span class="o">-</span> <span class="n">b</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">z</span> <span class="o">=</span> <span class="o">-</span><span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">w</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">xx</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span><span class="n">z</span><span class="p">)</span>
<span class="c1">#            plt.xlim(min_x,max_x)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
            <span class="c1">#%%</span>

    <span class="k">if</span> <span class="n">r</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span>
        <span class="n">figure</span><span class="p">()</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">H</span><span class="p">[</span><span class="n">y</span><span class="o">==+</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">H</span><span class="p">[</span><span class="n">y</span><span class="o">==+</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">H</span><span class="p">[</span><span class="n">y</span><span class="o">==+</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">H</span><span class="p">[</span><span class="n">y</span><span class="o">==-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">H</span><span class="p">[</span><span class="n">y</span><span class="o">==-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">H</span><span class="p">[</span><span class="n">y</span><span class="o">==-</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1">#%% === import from core.py ===</span>
<span class="k">def</span> <span class="nf">plt_show_slices</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">):</span>
   <span class="sd">&quot;&quot;&quot; Function to display row of image slices &quot;&quot;&quot;</span>
   <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
   <span class="n">slices</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="n">x</span><span class="p">,:,:],</span>
             <span class="n">data</span><span class="p">[:,</span><span class="n">y</span><span class="p">,:],</span>
             <span class="n">data</span><span class="p">[:,:,</span><span class="n">z</span><span class="p">]]</span>
   <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="nb">slice</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">slices</span><span class="p">):</span>
       <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="nb">slice</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">)</span>
       
<span class="k">def</span> <span class="nf">imtak</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">clim</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">cbar</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">symm_clim</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">multicursor</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
          <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span><span class="n">draw_lines</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update 04/27/2016 - added clim option</span>
<span class="sd">    Update 06/21/2016 - added cbar option</span>
<span class="sd">    Update 07/14/2016 - added few more options</span>
<span class="sd">    Update 07/22/2016 - added option ``draw_lines``</span>
<span class="sd">    Update 07/26/2016 - changed default for multicursor to True. also added</span>
<span class="sd">    *artist* argument (otherwise, all cursors syncs across different figures)</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    orientation : string</span>
<span class="sd">        orientation of colorbar (only relevant if cbar=True).</span>
<span class="sd">        Either &#39;vertical&#39; or &#39;horizontal&#39;</span>
<span class="sd">    kwargs : kwargs</span>
<span class="sd">        kwargs for ``plt.imshow``</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">matplotlib.widgets</span> <span class="kn">import</span> <span class="n">Cursor</span>
    <span class="kn">import</span> <span class="nn">mpldatacursor</span>

    <span class="n">img</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">im</span><span class="p">,</span><span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1">#img=plt.matshow(im,interpolation=&#39;none&#39;,**kwargs)</span>
    <span class="c1">#plt.colorbar()</span>

    <span class="k">if</span> <span class="n">multicursor</span><span class="p">:</span>
        <span class="n">display</span><span class="o">=</span><span class="s2">&quot;multiple&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">display</span><span class="o">=</span><span class="s2">&quot;single&quot;</span>

    <span class="n">dc</span> <span class="o">=</span> <span class="n">mpldatacursor</span><span class="o">.</span><span class="n">datacursor</span><span class="p">(</span>
        <span class="n">artists</span><span class="o">=</span><span class="p">[</span><span class="n">img</span><span class="p">],</span>
        <span class="n">formatter</span><span class="o">=</span><span class="s1">&#39;(i, j) = ({i}, {j})</span><span class="se">\n</span><span class="s1">z = {z:.2f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">,</span>
        <span class="n">draggable</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">axes</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">(),</span>
        <span class="n">arrowprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span><span class="o">=</span><span class="s1">&#39;-&gt;&#39;</span><span class="p">,</span> <span class="n">connectionstyle</span><span class="o">=</span><span class="s1">&#39;arc3,rad=0&#39;</span><span class="p">,</span>
               <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;magenta&#39;</span><span class="p">),</span> <span class="n">display</span><span class="o">=</span><span class="n">display</span><span class="p">)</span>
    <span class="n">Cursor</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">(),</span><span class="n">useblit</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span> <span class="mi">1</span> <span class="p">)</span>

    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">format_coord</span> <span class="o">=</span> <span class="n">Formatter</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="c1"># --- handle bunch of options ---</span>
    <span class="k">if</span> <span class="n">cbar</span><span class="p">:</span>
        <span class="c1">## http://stackoverflow.com/questions/18195758/set-matplotlib-colorbar-size-to-match-graph</span>
        <span class="k">if</span> <span class="n">orientation</span><span class="o">==</span><span class="s1">&#39;vertical&#39;</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">(),</span><span class="n">fraction</span><span class="o">=</span><span class="mf">0.046</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mf">0.04</span><span class="p">,</span><span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">orientation</span><span class="o">==</span><span class="s1">&#39;horizontal&#39;</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">(),</span><span class="n">fraction</span><span class="o">=</span><span class="mf">0.046</span><span class="p">,</span> <span class="n">pad</span><span class="o">=-</span><span class="mf">0.25</span><span class="p">,</span><span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">clim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">()</span><span class="o">.</span><span class="n">set_clim</span><span class="p">(</span><span class="n">clim</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">symm_clim</span><span class="p">:</span>
        <span class="n">plt_caxis_symm</span><span class="p">()</span>
        
    <span class="k">if</span> <span class="n">draw_lines</span><span class="p">:</span>
        <span class="n">plt_draw_lines_pixels</span><span class="p">()</span>
        
    <span class="c1"># remove annoying ticks</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span><span class="n">bottom</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">,</span><span class="n">top</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">,</span><span class="n">left</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">,</span><span class="n">right</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">)</span> 
        
    <span class="c1"># put xticks on top (not bottom)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span><span class="n">labeltop</span><span class="o">=</span><span class="s1">&#39;on&#39;</span><span class="p">,</span><span class="n">labelbottom</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
    <span class="c1">#plt.tick_params(axis=&#39;x&#39;,which=&#39;major&#39;,labeltop=&#39;off&#39;,labelbottom=&#39;on&#39;)</span>
    <span class="k">return</span> <span class="n">img</span>

<span class="k">def</span> <span class="nf">imtakk</span><span class="p">(</span><span class="n">im</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; for kwargs, see imtak&quot;&quot;&quot;</span>
    <span class="n">figure</span><span class="p">()</span>
    <span class="n">imtak</span><span class="p">(</span><span class="n">im</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">imconnmat_hemi_subplot_86</span><span class="p">(</span><span class="n">W</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">,</span><span class="n">ticks</span><span class="o">=</span><span class="s1">&#39;name_short2&#39;</span><span class="p">,</span><span class="n">suptitle</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
                              <span class="n">symm_clim</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Display connectivity by hemisphere as subplots (left,right,inter-hemisphere) (created 10/24/2015)</span>

<span class="sd">    Demo usage: https://github.com/takwatanabe2004/tak-ace-ibis/blob/master/python/pnc/dump/proto_imconnmat_hemi_subplot_86_and_imgridsearch_subplot_2d.ipynb</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    W : ndarray</span>
<span class="sd">        Symmetric matrix representing connectivity</span>
<span class="sd">        (if vector is supplied, will be converted into a symmetric matrix internally)</span>
<span class="sd">    suptitle : optional</span>
<span class="sd">        Optional subplot title</span>
<span class="sd">    symm_clim : bool</span>
<span class="sd">        Symmetrize colormap</span>
<span class="sd">    kwargs : kwargs</span>
<span class="sd">        kwargs for ``plt.imshow`` and ``imtak``</span>
<span class="sd">        </span>
<span class="sd">    Note</span>
<span class="sd">    -----</span>
<span class="sd">    for now, just assume we&#39;re only dealing with the 86 parcellation</span>
<span class="sd">    (think about how to extend this function for other parcellation later)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#backend = mpl.get_backend()</span>
    <span class="kn">from</span> <span class="nn">.conn</span> <span class="kn">import</span> <span class="n">get_node_info86</span>

    <span class="c1">#=========================================================================#</span>
    <span class="c1"># Colormap issue</span>
    <span class="c1"># https://github.com/matplotlib/matplotlib/issues/3644</span>
    <span class="c1">#-------------------------------------------------------------------------#</span>
    <span class="c1"># i cannot set colorbar cmap easily...as an adhoc workaround, store the</span>
    <span class="c1"># original cmap here, and set it back at the end</span>
    <span class="c1">#=========================================================================#</span>
    <span class="c1">#cmap_original = mpl.rcParams[&#39;image.cmap&#39;]</span>
    <span class="c1"># change cmap temporarily for this function</span>
    <span class="c1">#mpl.rcParams[&#39;image.cmap&#39;] = &#39;seismic&#39;</span>
    <span class="k">if</span> <span class="n">hostname</span> <span class="o">==</span> <span class="s1">&#39;takanori-PC&#39;</span><span class="p">:</span>
        <span class="n">figure</span><span class="p">([</span><span class="mi">8</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">1904</span><span class="p">,</span><span class="mi">860</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">figure</span><span class="p">([</span>   <span class="mi">1</span><span class="p">,</span>   <span class="mi">60</span><span class="p">,</span> <span class="mi">1598</span><span class="p">,</span>  <span class="mi">700</span><span class="p">])</span>
        
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">suptitle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">suptitle</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">W</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="ow">is</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c1"># W supplied is in vector form... convert to symmetric matrix form</span>
        <span class="n">W</span> <span class="o">=</span> <span class="n">sqform</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>

    <span class="c1"># get node info (used for tick labels)</span>
    <span class="c1">#df_node = get_node_info86()</span>
    <span class="n">ticks</span> <span class="o">=</span> <span class="n">get_node_info86</span><span class="p">()[</span><span class="n">ticks</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="c1"># use lobes as default</span>

    <span class="k">if</span> <span class="n">symm_clim</span><span class="p">:</span>
        <span class="n">clim</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">W</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">W</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">clim</span> <span class="o">=</span> <span class="p">(</span><span class="n">W</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">W</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
        
    <span class="n">connmat_setup</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
                         <span class="n">newfig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                         <span class="n">cmap</span> <span class="o">=</span> <span class="n">cmap</span><span class="p">,</span>
                         <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    
    <span class="sd">&quot;&quot;&quot; Update 11/03 - Only show yticks on the left-most subplot &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">hemi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span><span class="s1">&#39;inter&#39;</span><span class="p">,</span><span class="s1">&#39;right&#39;</span><span class="p">]):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
        <span class="n">imconnmat_hemi</span><span class="p">(</span><span class="n">W</span><span class="p">,</span><span class="n">ticks</span><span class="p">,</span><span class="n">ticks</span><span class="p">,</span><span class="n">hemi</span><span class="o">=</span><span class="n">hemi</span><span class="p">,</span><span class="o">**</span><span class="n">connmat_setup</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">()</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">clim</span><span class="p">(</span><span class="n">clim</span><span class="p">)</span>
        <span class="c1">#print clim</span>
    
    <span class="c1">#=========================================================================#</span>
    <span class="c1"># Colorbar placement</span>
    <span class="c1">#-------------------------------------------------------------------------#</span>
    <span class="c1"># for now, place them on top of the subplot...</span>
    <span class="c1"># i had to tweek the values here...figure out how to automate this process</span>
    <span class="c1">#=========================================================================#</span>
    <span class="c1"># Make an axis for the colorbar on the right side</span>
    <span class="c1"># http://stackoverflow.com/questions/7875688/how-can-i-create-a-standard-colorbar-for-a-series-of-plots-in-python</span>
    <span class="n">cax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.062</span><span class="p">])</span> <span class="c1"># [left,bottom,width,height]01</span>
    <span class="k">if</span> <span class="n">symm_clim</span><span class="p">:</span>
        <span class="n">plt_caxis_symm</span><span class="p">()</span> <span class="c1"># &lt;- needed to update the symmetrized colorbar...</span>
    <span class="n">cbar</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">(),</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">ticks</span> <span class="o">=</span> <span class="n">plt_cbar_ticks</span><span class="p">())</span>
    <span class="c1">#cax = fig.add_axes([0.99, 0.1, 0.01, 0.8]) # [left,bottom,width,height]01</span>
    <span class="c1">#fig.colorbar(plt.gci(), cax=cax, orientation=&#39;vertical&#39;)</span>
    <span class="c1">#plt.tight_layout()</span>

    <span class="c1"># change colorbar fontsize</span>
    <span class="c1"># http://stackoverflow.com/questions/29074820/how-do-i-change-the-font-size-of-ticks-of-matplotlib-pyplot-colorbar-colorbarbas</span>
    <span class="c1"># http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.tick_params</span>
    <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="c1">#cbar.set_label(&#39;Coefficient weights&#39;) # &lt;- just know this exists</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">imconnmat_hemi</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">xtick_label</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">ytick_label</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">hemi</span><span class="o">=</span><span class="s1">&#39;L&#39;</span><span class="p">,</span>
                   <span class="n">symm_clim</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">newfig</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span><span class="n">title_str</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Show subset of connectome (&#39;L&#39;,&#39;R&#39;, or &#39;inter&#39;)</span>

<span class="sd">    Warning</span>
<span class="sd">    -------</span>
<span class="sd">    Only works for the desikan86 parcellation, where the first half is from the</span>
<span class="sd">    left hemisphere and the other half is from the right....</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    W : ndarray</span>
<span class="sd">        Symmetric matrix representing connectivity</span>
<span class="sd">        (if vector is supplied, will be converted into a symmetric matrix internally)</span>
<span class="sd">    hemi : string (default: &#39;L&#39;)</span>
<span class="sd">        string indicating what part to show</span>

<span class="sd">        Supported (case insensitive):</span>

<span class="sd">        - &#39;L&#39; or &#39;left&#39;</span>
<span class="sd">        - &#39;R&#39; or &#39;right&#39;</span>
<span class="sd">        - &#39;I&#39; or &#39;inter&#39; (for interhemisphere)</span>
<span class="sd">    symm_clim : bool</span>
<span class="sd">        Symmetrize colormap</span>
<span class="sd">    kwargs : kwargs</span>
<span class="sd">        kwargs for ``plt.imshow`` and ``imtak``</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">W</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="ow">is</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c1"># W supplied is in vector form... convert to symmetric matrix form</span>
        <span class="n">W</span> <span class="o">=</span> <span class="n">sqform</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>

    <span class="c1">#%% np.ix_ for extracting submatrix in numpy via indexing...</span>
    <span class="c1"># ref: http://stackoverflow.com/questions/19161512/numpy-extract-submatrix</span>
    <span class="c1">#      http://docs.scipy.org/doc/numpy/reference/generated/numpy.ix_.html</span>
    <span class="c1">#%%</span>
    <span class="n">connmat_setup</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
                         <span class="n">newfig</span><span class="o">=</span><span class="n">newfig</span><span class="p">,</span>
                         <span class="n">cmap</span> <span class="o">=</span> <span class="n">cmap</span><span class="p">,</span>
                         <span class="n">symm_clim</span><span class="o">=</span><span class="n">symm_clim</span><span class="p">,</span>
                         <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                         
    <span class="c1">#print connmat_setup.keys()</span>
                         
    <span class="c1"># === get hemisphere info === #                         </span>
    <span class="n">idx_L</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">43</span><span class="p">)</span>
    <span class="n">idx_R</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">43</span><span class="p">,</span><span class="mi">86</span><span class="p">)</span>
    
    <span class="c1"># extract relevant submatrix</span>
    <span class="k">if</span> <span class="n">hemi</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;l&#39;</span><span class="p">,</span><span class="s1">&#39;left&#39;</span><span class="p">):</span>
        <span class="c1"># extract left-hemisphere</span>
        <span class="n">Whemi</span> <span class="o">=</span> <span class="n">W</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ix_</span><span class="p">(</span><span class="n">idx_L</span><span class="p">,</span><span class="n">idx_L</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">xtick_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">xtick_label</span> <span class="o">=</span> <span class="n">xtick_label</span><span class="p">[</span><span class="n">idx_L</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ytick_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">ytick_label</span> <span class="o">=</span> <span class="n">ytick_label</span><span class="p">[</span><span class="n">idx_L</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">title_str</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">title_str</span> <span class="o">=</span> <span class="s1">&#39;Left-hemisphere&#39;</span>
    <span class="k">elif</span> <span class="n">hemi</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;right&#39;</span><span class="p">):</span>
        <span class="c1"># extract right-hemisphere</span>
        <span class="n">Whemi</span> <span class="o">=</span> <span class="n">W</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ix_</span><span class="p">(</span><span class="n">idx_R</span><span class="p">,</span><span class="n">idx_R</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">xtick_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">xtick_label</span> <span class="o">=</span> <span class="n">xtick_label</span><span class="p">[</span><span class="n">idx_R</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ytick_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">ytick_label</span> <span class="o">=</span> <span class="n">ytick_label</span><span class="p">[</span><span class="n">idx_R</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">title_str</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">title_str</span> <span class="o">=</span> <span class="s1">&#39;Right-hemisphere&#39;</span>
    <span class="k">elif</span> <span class="n">hemi</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span><span class="s1">&#39;inter&#39;</span><span class="p">):</span>
        <span class="c1"># extract inter-hemisphere</span>
        <span class="n">Whemi</span> <span class="o">=</span> <span class="n">W</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ix_</span><span class="p">(</span><span class="n">idx_R</span><span class="p">,</span><span class="n">idx_L</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">xtick_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">xtick_label</span> <span class="o">=</span> <span class="n">xtick_label</span><span class="p">[</span><span class="n">idx_L</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ytick_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">ytick_label</span> <span class="o">=</span> <span class="n">ytick_label</span><span class="p">[</span><span class="n">idx_R</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">title_str</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">title_str</span> <span class="o">=</span> <span class="s1">&#39;Inter-hemisphere&#39;</span>
    <span class="n">imconnmat</span><span class="p">(</span> <span class="n">Whemi</span><span class="p">,</span> <span class="n">xtick_label</span><span class="p">,</span> <span class="n">ytick_label</span><span class="p">,</span><span class="o">**</span><span class="n">connmat_setup</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title_str</span><span class="p">)</span>


<div class="viewcode-block" id="imconnmat"><a class="viewcode-back" href="../../test_autodoc.html#tak.imconnmat">[docs]</a><span class="k">def</span> <span class="nf">imconnmat</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">xtick_label</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">ytick_label</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
              <span class="n">colorbar</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span><span class="n">symm_clim</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">newfig</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Display connectivity matrix</span>

<span class="sd">    Created 10/19/2015</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    W : ndarray</span>
<span class="sd">        matrix representing connectivity (if a vector, will get converted into</span>
<span class="sd">        a symmetric matrix via sqform function)</span>
<span class="sd">    xtick_label : list/ndarray of strings of label</span>
<span class="sd">        list/ndarray of strings of label</span>
<span class="sd">    ytick_label : list/ndarray of strings of label</span>
<span class="sd">        list/ndarray of strings of label</span>
<span class="sd">    fontsize : default 8</span>
<span class="sd">    newfig : ...</span>
<span class="sd">        &#39;fullscreen&#39;,&#39;f&#39;, etc</span>
<span class="sd">    kwargs : kwargs</span>
<span class="sd">        kwargs for ``plt.imshow`` and ``imtak``</span>

<span class="sd">    See also</span>
<span class="sd">    --------</span>
<span class="sd">    imgridsearch</span>

<span class="sd">    Update history</span>
<span class="sd">    --------------</span>
<span class="sd">    - 02/05/2016: added ``colorbar`` option</span>
<span class="sd">    - 07/22/2016: replaced ``pcolormesh`` with ``imtak``</span>
<span class="sd">    - 08/10/2016: added option &#39;cmap&#39; and kwargs</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">newfig</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">figure</span><span class="p">(</span><span class="n">newfig</span><span class="p">)</span>
        
<span class="c1">#    figure()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">W</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="ow">is</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c1"># W supplied is in vector form... convert to symmetric matrix form</span>
        <span class="n">W</span> <span class="o">=</span> <span class="n">sqform</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>

    <span class="c1">#plt.pcolormesh(W,edgecolors=&#39;k&#39;,lw=1,cmap=&#39;seismic&#39;)</span>
    <span class="n">imtak</span><span class="p">(</span><span class="n">W</span><span class="p">,</span><span class="n">orientation</span><span class="o">=</span><span class="n">colorbar</span><span class="p">,</span><span class="n">draw_lines</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">symm_clim</span><span class="o">=</span><span class="n">symm_clim</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">plt_draw_lines_pixels</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">xtick_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">xtick_label</span><span class="p">)),</span> <span class="n">xtick_label</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ytick_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">ytick_label</span><span class="p">)),</span> <span class="n">ytick_label</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">)</span>
        
    <span class="c1"># put xticks on top (not bottom)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span><span class="n">labeltop</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">,</span><span class="n">labelbottom</span><span class="o">=</span><span class="s1">&#39;on&#39;</span><span class="p">)</span>
    
    <span class="c1"># plt.tight_layout()</span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="c1"># &lt;- removes the awkward boundary (comment out this line to see what i mean)</span>
    
    <span class="k">if</span> <span class="n">cmap</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">()</span><span class="o">.</span><span class="n">set_cmap</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span></div>
    
    


<span class="k">def</span> <span class="nf">imgridsearch</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">xtick_label</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">ytick_label</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
                 <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;hot&#39;</span><span class="p">,</span><span class="n">show_max</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">show_cbar</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Display gridsearch matrix</span>

<span class="sd">    Created 10/21/2015</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    W : ndarray</span>
<span class="sd">        matrix representing connectivity</span>
<span class="sd">    xtick_label : list/ndarray of strings of label</span>
<span class="sd">        list/ndarray of strings of label</span>
<span class="sd">    ytick_label : list/ndarray of strings of label</span>
<span class="sd">        list/ndarray of strings of label</span>
<span class="sd">    fontsize : default 8</span>
<span class="sd">    show_max : bool (default: False)</span>
<span class="sd">        show max location (ignores ties for now)</span>
<span class="sd">    show_cbar : bool (default: False)</span>
<span class="sd">        show colorbar</span>

<span class="sd">    See also</span>
<span class="sd">    --------</span>
<span class="sd">    imconnmat</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#print kwargs</span>
    <span class="n">cmap_original</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;image.cmap&#39;</span><span class="p">]</span>
    <span class="c1"># change cmap temporarily for this function</span>
    <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;image.cmap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmap</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">W</span><span class="p">,</span><span class="n">edgecolors</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span><span class="n">lw</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">xtick_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">xtick_label</span><span class="p">)),</span> <span class="n">xtick_label</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ytick_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">ytick_label</span><span class="p">)),</span> <span class="n">ytick_label</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">)</span>
    <span class="c1"># plt.tight_layout()</span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="c1"># &lt;- removes the awkward boundary (comment out this line to see what i mean)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">invert_yaxis</span><span class="p">()</span>
    <span class="c1">#plt.colorbar()</span>

    <span class="c1"># remove ticks</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
        <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span>          <span class="c1"># changes apply to the x-axis</span>
        <span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span>      <span class="c1"># both major and minor ticks are affected</span>
        <span class="n">bottom</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">,</span>
        <span class="n">left</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">,</span>
        <span class="n">right</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">,</span>
        <span class="n">top</span><span class="o">=</span><span class="s1">&#39;off&#39;</span>
        <span class="p">)</span>
    <span class="c1"># symmetrize caxis</span>
    <span class="c1">#caxis_symm()</span>

    <span class="c1"># impixelinfo imitator</span>
    <span class="n">imtak</span><span class="p">(</span><span class="n">W</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">show_cbar</span><span class="p">:</span>
        <span class="c1">#plt.colorbar()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">(),</span><span class="n">fraction</span><span class="o">=</span><span class="mf">0.046</span><span class="p">,</span>
                            <span class="n">pad</span><span class="o">=</span><span class="mf">0.04</span><span class="p">,</span><span class="n">ticks</span> <span class="o">=</span> <span class="n">cbar_ticks</span><span class="p">(),</span>
                            <span class="n">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%.3f</span><span class="s1">&#39;</span><span class="p">)</span>


    <span class="k">if</span> <span class="n">show_max</span><span class="p">:</span>
        <span class="c1">#</span>
        <span class="n">row_max</span><span class="p">,</span><span class="n">col_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unravel_index</span><span class="p">(</span><span class="n">W</span><span class="o">.</span><span class="n">argmax</span><span class="p">(),</span> <span class="n">W</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="k">assert</span><span class="p">(</span> <span class="n">W</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">==</span> <span class="n">W</span><span class="p">[</span><span class="n">row_max</span><span class="p">,</span><span class="n">col_max</span><span class="p">])</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">col_max</span><span class="o">+.</span><span class="mi">5</span><span class="p">,</span><span class="n">row_max</span><span class="o">+.</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;{:3.3f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">W</span><span class="o">.</span><span class="n">max</span><span class="p">()),</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
                 <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span><span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>

        <span class="c1">#=== show all ties ===</span>
        <span class="c1"># find out all the peaks</span>
        <span class="k">for</span> <span class="n">idx_ties</span> <span class="ow">in</span> <span class="n">argmax_ties</span><span class="p">(</span><span class="n">W</span><span class="p">):</span>
            <span class="n">ymax</span> <span class="o">=</span> <span class="n">idx_ties</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">xmax</span> <span class="o">=</span> <span class="n">idx_ties</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="c1"># note: 0.5 added to make ticks align nicely</span>
            <span class="c1"># (has to do with how pcolormesh work)</span>
            <span class="c1">#plt.text(xmax+0.5,ymax+0.5, r&#39;$\mathbf{\times}$&#39;)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xmax</span><span class="o">+</span><span class="mf">0.5</span><span class="p">,</span><span class="n">ymax</span><span class="o">+</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;bx&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                     <span class="n">markeredgewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

    <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;image.cmap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmap_original</span>


<span class="k">def</span> <span class="nf">imgridsearch_subplot_2d</span><span class="p">(</span><span class="n">acclist</span><span class="p">,</span> <span class="n">xtick_label</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">ytick_label</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                            <span class="n">n_col</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">vmin</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span><span class="n">suptitle</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                            <span class="n">markTies</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Compact display of 2d gridsearch results for ipynb (created 10/24/2015)</span>

<span class="sd">    Assumes 2 hyperparameters.</span>

<span class="sd">    Function relies on ``imgridsearch``</span>

<span class="sd">    Demo usage: https://github.com/takwatanabe2004/tak-ace-ibis/blob/master/python/pnc/dump/proto_imconnmat_hemi_subplot_86_and_imgridsearch_subplot_2d.ipynb</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    accgrid : list of ndarray</span>
<span class="sd">        Each list element is a 2d array representing accuracy at different</span>
<span class="sd">        hyperparameter values.</span>
<span class="sd">    xtick_label : list/ndarray of strings of label</span>
<span class="sd">        list/ndarray of strings of label</span>
<span class="sd">    ytick_label : list/ndarray of strings of label</span>
<span class="sd">        list/ndarray of strings of label</span>
<span class="sd">    xlabel : string (default None)</span>
<span class="sd">        xlabel display</span>
<span class="sd">    ylabel : string (default None)</span>
<span class="sd">        ylabel display</span>
<span class="sd">    n_col : int (default 3)</span>
<span class="sd">        number of subplot columns to display per each row</span>

<span class="sd">    Warning</span>
<span class="sd">    --------</span>
<span class="sd">    I often get x/y and the rows/cols mixed up...always do sanity checks</span>
<span class="sd">    to ensure i didn&#39;t f up something</span>

<span class="sd">    See Also</span>
<span class="sd">    ---------</span>
<span class="sd">    :func:`imgridsearch`:</span>
<span class="sd">        this function calls this to create the nice &quot;box&quot; type display using</span>
<span class="sd">        imcolormesh</span>
<span class="sd">    :func:`imconnmat_hemi_sub_86`:</span>
<span class="sd">        same idea as this function</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#%% parse inputs</span>
    <span class="k">if</span> <span class="n">xtick_label</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">xtick_label</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">acclist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">ytick_label</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">ytick_label</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">acclist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">xlabel</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1">#xlabel = r&#39;log$_2$($\lambda$)&#39;</span>
        <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;hyperparameter2&#39;</span>
    <span class="k">if</span> <span class="n">ylabel</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1">#ylabel = r&#39;log$_2$($\alpha$)&#39;</span>
        <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;hyperparameter1&#39;</span>
    <span class="n">backend</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">get_backend</span><span class="p">()</span>

    <span class="c1">#=========================================================================#</span>
    <span class="c1"># Colormap issue</span>
    <span class="c1"># https://github.com/matplotlib/matplotlib/issues/3644</span>
    <span class="c1">#-------------------------------------------------------------------------#</span>
    <span class="c1"># i cannot set colorbar cmap easily...as an adhoc workaround, store the</span>
    <span class="c1"># original cmap here, and set it back at the end</span>
    <span class="c1">#=========================================================================#</span>
    <span class="n">cmap_original</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;image.cmap&#39;</span><span class="p">]</span>
    <span class="c1"># change cmap temporarily for this function</span>
    <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;image.cmap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;hot&#39;</span>

    <span class="k">if</span> <span class="n">backend</span> <span class="o">==</span> <span class="s1">&#39;module://ipykernel.pylab.backend_inline&#39;</span><span class="p">:</span>
        <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
        <span class="n">fs_sup</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="k">elif</span> <span class="n">backend</span> <span class="o">==</span> <span class="s1">&#39;Qt4Agg&#39;</span><span class="p">:</span>
        <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
        <span class="n">fs_sup</span> <span class="o">=</span> <span class="mi">24</span> <span class="c1"># sup title fontsize</span>

    <span class="c1">#%% alright, let&#39;s begin</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">acc_grid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">acclist</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span><span class="o">%</span><span class="n">n_col</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>
            <span class="n">cnt</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">suptitle</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Cross-Validation Accuracy&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fs_sup</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">suptitle</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="n">fs_sup</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n_col</span><span class="p">,</span><span class="n">cnt</span><span class="p">)</span>
        <span class="n">cnt</span><span class="o">+=</span><span class="mi">1</span>

        <span class="c1"># fugly if statements below, but does its job...</span>
        <span class="k">if</span> <span class="n">vmin</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">vmax</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">imgridsearch</span><span class="p">(</span><span class="n">acc_grid</span><span class="p">,</span><span class="n">xtick_label</span><span class="p">,</span><span class="n">ytick_label</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span><span class="n">show_max</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">vmin</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c1"># sometimes i like to specify the lowerbound of caxis only</span>
            <span class="n">imgridsearch</span><span class="p">(</span><span class="n">acc_grid</span><span class="p">,</span><span class="n">xtick_label</span><span class="p">,</span><span class="n">ytick_label</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span><span class="n">show_max</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="n">acc_grid</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
        <span class="k">elif</span> <span class="n">vmin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">vmax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">imgridsearch</span><span class="p">(</span><span class="n">acc_grid</span><span class="p">,</span><span class="n">xtick_label</span><span class="p">,</span><span class="n">ytick_label</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span><span class="n">show_max</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">)</span>

        <span class="c1"># optional: mark peak with &quot;x&quot; marks....including ties</span>
        <span class="k">if</span> <span class="n">markTies</span><span class="p">:</span>
            <span class="c1"># find out all the peaks</span>
            <span class="k">for</span> <span class="n">idx_ties</span> <span class="ow">in</span> <span class="n">argmax_ties</span><span class="p">(</span><span class="n">acc_grid</span><span class="p">):</span>
                <span class="n">ymax</span> <span class="o">=</span> <span class="n">idx_ties</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">xmax</span> <span class="o">=</span> <span class="n">idx_ties</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="c1"># note: 0.5 added to make ticks align nicely</span>
                <span class="c1"># (has to do with how pcolormesh work)</span>
                <span class="c1">#plt.text(xmax+0.5,ymax+0.5, r&#39;$\mathbf{\times}$&#39;)</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xmax</span><span class="o">+</span><span class="mf">0.5</span><span class="p">,</span><span class="n">ymax</span><span class="o">+</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;bx&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                         <span class="n">markeredgewidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

        <span class="c1"># argh...my ocd&#39;ness is bothered by the trivial detail like below...</span>
        <span class="k">if</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="ow">is</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">title_str</span> <span class="o">=</span> <span class="s1">&#39; 1st CV fold&#39;</span>
        <span class="k">elif</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="ow">is</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">title_str</span> <span class="o">=</span> <span class="s1">&#39; 2nd CV fold&#39;</span>
        <span class="k">elif</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="ow">is</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">title_str</span> <span class="o">=</span> <span class="s1">&#39; 3rd CV fold&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">title_str</span> <span class="o">=</span> <span class="s1">&#39;{:2}th CV fold&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title_str</span><span class="o">+</span><span class="s1">&#39; (Max = {:4.2f}%)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">acc_grid</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">*</span><span class="mi">100</span><span class="p">))</span>

        <span class="c1">#=====================================================================#</span>
        <span class="c1"># Colorbar placement</span>
        <span class="c1">#---------------------------------------------------------------------#</span>
        <span class="c1"># for now, place them on top of the subplot...</span>
        <span class="c1"># i had to tweek the values here...figure out how to automate this process</span>
        <span class="c1">#=====================================================================#</span>
        <span class="c1"># Make an axis for the colorbar on the top side</span>
        <span class="c1"># http://stackoverflow.com/questions/7875688/how-can-i-create-a-standard-colorbar-for-a-series-of-plots-in-python</span>
        <span class="n">cax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.062</span><span class="p">])</span> <span class="c1"># [left,bottom,width,height]01</span>
        <span class="n">cbar</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">(),</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">ticks</span> <span class="o">=</span> <span class="n">plt_cbar_ticks</span><span class="p">())</span>
        <span class="c1">#cax = fig.add_axes([0.99, 0.1, 0.01, 0.8]) # [left,bottom,width,height]01</span>
        <span class="c1">#fig.colorbar(plt.gci(), cax=cax, orientation=&#39;vertical&#39;)</span>
        <span class="c1">#plt.tight_layout()</span>

        <span class="c1"># change colorbar fontsize</span>
        <span class="c1"># http://stackoverflow.com/questions/29074820/how-do-i-change-the-font-size-of-ticks-of-matplotlib-pyplot-colorbar-colorbarbas</span>
        <span class="c1"># http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.tick_params</span>
        <span class="n">cbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="c1">#cbar.set_label(&#39;Coefficient weights&#39;) # &lt;- just know this exists</span>


    <span class="c1"># set colormap back to original</span>
    <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;image.cmap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmap_original</span>
<span class="c1">#%% ==== style fixers =====</span>
<span class="k">def</span> <span class="nf">plt_symm_xaxis</span><span class="p">():</span>
    <span class="n">xlim_abs</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="n">xlim_abs</span><span class="p">,</span><span class="n">xlim_abs</span><span class="p">)</span>
    
    
<span class="k">def</span> <span class="nf">plt_draw_lines_pixels</span><span class="p">(</span><span class="n">axis_type</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span><span class="n">lw</span><span class="o">=</span><span class="mf">1.5</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Draw border lines (used with ``imtak``)</span>
<span class="sd">    </span>
<span class="sd">    ::</span>
<span class="sd">    </span>
<span class="sd">        D = np.random.randn(50,20)</span>
<span class="sd">        tw.imtakk(D, symm_clim=True,cbar=False)</span>
<span class="sd">        plt.gci().set_cmap(&#39;seismic&#39;)</span>
<span class="sd">        tw.plt_draw_lines_pixels(&#39;tight&#39;)</span>
<span class="sd">        plt.colorbar()</span>
<span class="sd">        </span>
<span class="sd">    </span>
<span class="sd">    Created 07/17/2016</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span> <span class="c1"># &lt;- needed to ensure the xlim/ylim below captures the right range</span>
    <span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">())</span>
    <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">())</span>
    <span class="n">xmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">())</span>
    <span class="n">xmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">())</span>
    
    <span class="n">line_options</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">colors</span><span class="o">=</span><span class="n">c</span><span class="p">,</span><span class="n">lw</span><span class="o">=</span><span class="n">lw</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">xx</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">xmax</span><span class="p">))</span><span class="o">-</span><span class="mf">0.5</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span><span class="n">ymin</span><span class="o">=</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="o">=</span><span class="n">ymax</span><span class="p">,</span><span class="o">**</span><span class="n">line_options</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">yy</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">ymax</span><span class="p">))</span><span class="o">-</span><span class="mf">0.5</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="n">yy</span><span class="p">,</span><span class="n">xmin</span><span class="o">=</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="n">xmax</span><span class="p">,</span><span class="o">**</span><span class="n">line_options</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">axis_type</span><span class="p">)</span>
    <span class="c1">#fig=plt.gcf()</span>
    <span class="c1">#fig.delaxes(fig.axes[1]) # &lt;- the index here is crucial</span>
    <span class="c1">#tw.colorbar(&#39;horizontal&#39;)</span>
<span class="c1">#%% --- colorbar/cmap related ---</span>
<span class="sd">&quot;&quot;&quot; This cell contains simple functions that changes styles on existing figures&quot;&quot;&quot;</span>
<span class="k">def</span> <span class="nf">colorbar</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;My version of colorbar that matches the vertical size well</span>
<span class="sd">    </span>
<span class="sd">    orientation : string</span>
<span class="sd">        &#39;vertical&#39; or &#39;horizontal&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># http://stackoverflow.com/questions/18195758/set-matplotlib-colorbar-size-to-match-graph</span>
    <span class="k">if</span> <span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;vertical&#39;</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">(),</span><span class="n">fraction</span><span class="o">=</span><span class="mf">0.046</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mf">0.04</span><span class="p">,</span><span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">(),</span><span class="n">fraction</span><span class="o">=</span><span class="mf">0.046</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mf">0.04</span><span class="p">,</span><span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">)</span>
        
    
    
<span class="k">def</span> <span class="nf">plt_colorbar_cmap</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; My custom colorbar function that includes the cmap argument (clunky but works)</span>

<span class="sd">    Warning</span>
<span class="sd">    ---------</span>
<span class="sd">    FUNCTION NOT FULLY TESTED YET!</span>

<span class="sd">    Returns</span>
<span class="sd">    --------</span>
<span class="sd">    cbar : object</span>
<span class="sd">        colorbar object</span>

<span class="sd">    Description</span>
<span class="sd">    -------------</span>
<span class="sd">    I cannot set colorbar cmap easily...see https://github.com/matplotlib/matplotlib/issues/3644</span>

<span class="sd">    As an adhoc workaround, here I change the rcParams temporarily, display</span>
<span class="sd">    the colorbar, and then reset the original rcParams value.</span>

<span class="sd">    See the code to see wth i&#39;m doing...</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">cmap</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;cmap not given...defeats the purpose of this function&#39;</span><span class="p">)</span>
        <span class="n">cbar</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cmap_original</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;image.cmap&#39;</span><span class="p">]</span>

        <span class="c1"># change cmap temporarily for this function</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;image.cmap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmap</span>
        <span class="k">print</span> <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;image.cmap&#39;</span><span class="p">]</span>
        <span class="n">cbar</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># revert back to the original cmap</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;image.cmap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmap_original</span>

    <span class="k">return</span> <span class="n">cbar</span>

<span class="k">def</span> <span class="nf">plt_cbar_ticks</span><span class="p">(</span><span class="n">num_ticks</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">mappable</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Convenience script</span>

<span class="sd">    Have colorbar only show tickts at [min, mid, max]</span>

<span class="sd">    TODO</span>
<span class="sd">    -----</span>
<span class="sd">    Include integer as input to indicate how many &quot;inbetween&quot; markers to add</span>

<span class="sd">    Usage</span>
<span class="sd">    ------</span>
<span class="sd">    &gt;&gt;&gt; plt.imshow(W)</span>
<span class="sd">    &gt;&gt;&gt; plt.colorbar(orientation=&#39;horizontal&#39;, pad = pad,ticks=plt_cbar_ticks())</span>
<span class="sd">    </span>
<span class="sd">    History</span>
<span class="sd">    -------</span>
<span class="sd">    - 10/30/2015 - Added optional ``mappable`` parameter</span>
<span class="sd">    - 07/22/2016 - added option ``num_ticks``. also use linspace to return values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">mappable</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># try to get ScalarMappable object</span>
        <span class="c1"># http://stackoverflow.com/questions/13060450/how-to-get-current-plots-clim-in-matplotlib</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">()</span><span class="o">.</span><span class="n">get_clim</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">mappable</span><span class="o">.</span><span class="n">get_clim</span><span class="p">()</span>
    <span class="c1">#return np.array([vmin, (vmin+vmax)/2, vmax])</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span><span class="n">vmax</span><span class="p">,</span><span class="n">num_ticks</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">plt_caxis_symm</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; symmetrize caxis in imshow (called vmin, vmax in python)</span>

<span class="sd">    Created 10/19/2015</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">()</span><span class="o">.</span><span class="n">get_clim</span><span class="p">()</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">vmin</span><span class="p">),</span> <span class="n">vmax</span><span class="p">]</span> <span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">()</span><span class="o">.</span><span class="n">set_clim</span><span class="p">(</span><span class="n">vmin</span><span class="o">=-</span><span class="n">v</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="n">v</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">plt_symm_caxis</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; symmetrize caxis in imshow (called vmin, vmax in python)&quot;&quot;&quot;</span>
    <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">()</span><span class="o">.</span><span class="n">get_clim</span><span class="p">()</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">vmin</span><span class="p">),</span> <span class="n">vmax</span><span class="p">]</span> <span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">gci</span><span class="p">()</span><span class="o">.</span><span class="n">set_clim</span><span class="p">(</span><span class="n">vmin</span><span class="o">=-</span><span class="n">v</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="n">v</span><span class="p">)</span>

<span class="c1">#| just use ``plt.clim()``</span>
<span class="c1">#def plt_clim(clim):</span>
<span class="c1">#    &quot;&quot;&quot; Shortcut to cim (Created 06/21/2016)&quot;&quot;&quot;</span>
<span class="c1">#    plt.gci().set_clim(clim)</span>
    
<span class="k">def</span> <span class="nf">plt_legend_move</span><span class="p">(</span><span class="n">xpos</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span><span class="n">ypos</span><span class="o">=</span><span class="mf">0.7</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Used since pandas plot&#39;s legend often hides the important part of image.</span>

<span class="sd">    Source</span>
<span class="sd">    -------</span>
<span class="sd">    &gt;&gt;&gt; plt.legend(bbox_to_anchor=(xpos,ypos))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="n">xpos</span><span class="p">,</span><span class="n">ypos</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">plt_legend_hide</span><span class="p">(</span><span class="n">ax</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Hide legend from axes.  Kept from mneumonic</span>

<span class="sd">    Source</span>
<span class="sd">    -------</span>
<span class="sd">    &gt;&gt;&gt; ax.legend().set_visible(False)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
    <span class="c1">#ax.legend(bbox_to_anchor=(1.0, 0.5))</span>

<span class="c1">#%% -- tick related --</span>
<span class="k">def</span> <span class="nf">plt_remove_ticks</span><span class="p">():</span>
    <span class="c1"># remove annoying ticks</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span><span class="n">bottom</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">,</span><span class="n">top</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">,</span><span class="n">left</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">,</span><span class="n">right</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">)</span> 

<span class="c1">#%%</span>
<span class="c1">##%% --- font-sizes ---</span>
<span class="c1">#def plt_labelsize(labelsize):</span>
<span class="c1">#    &quot;&quot;&quot;Reminder for changing xlabel/ylabel size (06/01/2016)&quot;&quot;&quot;</span>
<span class="c1">#    plt.tick_params(labelsize=20)</span>
<span class="c1">#    </span>
<span class="c1">#def plt_font_xticklabels(fs=14, rotation=&#39;vertical&#39;):</span>
<span class="c1">#    for tick in plt.gca().xaxis.get_major_ticks():</span>
<span class="c1">#        tick.label.set_fontsize(fs)</span>
<span class="c1">#        tick.label.set_rotation(rotation)</span>
<span class="c1">#</span>
<span class="c1">#    # when rotation is applied on xtick, things look awkward as fuck.</span>
<span class="c1">#    # apply fix.</span>
<span class="c1">#    if rotation != &#39;vertical&#39;:</span>
<span class="c1">#        plt_fix_xticklabels_rot()</span>
<span class="c1">#</span>
<span class="c1">#    # sometimes xticklabels get truncated...so apply fix below</span>
<span class="c1">#    #plt.gcf().subplots_adjust(bottom=0.4)</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#def plt_font_yticklabels(fs=14):</span>
<span class="c1">#    for tick in plt.gca().yaxis.get_major_ticks():</span>
<span class="c1">#        tick.label.set_fontsize(fs)</span>
<span class="c1">#</span>
<span class="c1">#def plt_fix_xticklabels_rot():</span>
<span class="c1">#    &quot;&quot;&quot; Fix the odd looking xtick when ``rot`` is used in pandas plot</span>
<span class="c1">#</span>
<span class="c1">#    **Created 11/18/2015**</span>
<span class="c1">#    (see ``pnc_analyze_clf_summary_1118.py`` for usage)</span>
<span class="c1">#</span>
<span class="c1">#    Example</span>
<span class="c1">#    -------</span>
<span class="c1">#    corrmat.mean().plot(kind=&#39;bar&#39;, fontsize=14, rot=30)</span>
<span class="c1">#    pd_plot_fix_xtick_labels_rot()</span>
<span class="c1">#    </span>
<span class="c1">#    Ref</span>
<span class="c1">#    ---</span>
<span class="c1">#    - http://stackoverflow.com/questions/31859285/rotate-tick-labels-for-seaborn-barplot</span>
<span class="c1">#    - http://stackoverflow.com/questions/26540035/rotate-label-text-in-seaborn-factorplot</span>
<span class="c1">#    &quot;&quot;&quot;</span>
<span class="c1">#    #http://stackoverflow.com/questions/26540035/rotate-label-text-in-seaborn-factorplot</span>
<span class="c1">#    plt.xticks(ha=&#39;right&#39;)</span>
<span class="c1">#    #plt.xticks(rotation=45, ha=&#39;right&#39;,fontsize=32)</span>
<span class="c1">#    #%% === below is old code (06/10/2016) ===</span>
<span class="c1">#    &quot;&quot;&quot;</span>
<span class="c1">#    # list of text objects</span>
<span class="c1">#    xtick_list = plt.gca().get_xticklabels()</span>
<span class="c1">#</span>
<span class="c1">#    #text_list = [xtick.get_text() for xtick in xtick_list]</span>
<span class="c1">#    #return text_list</span>
<span class="c1">#</span>
<span class="c1">#    for xtick in xtick_list:</span>
<span class="c1">#        xtick.set_ha(&#39;right&#39;)</span>
<span class="c1">#    plt.draw()&quot;&quot;&quot;</span>

<span class="c1">#%% === seaborn/sns related ===</span>
<span class="k">def</span> <span class="nf">sns_figure</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;darkgrid&#39;</span><span class="p">,</span><span class="n">rc</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Created 07/18/2016</span>
<span class="sd">    </span>
<span class="sd">    Used to temporaritly change figure style in seaborn.</span>
<span class="sd">    </span>
<span class="sd">    See docstring for ``sns.set_style`` for more.</span>
<span class="sd">    </span>
<span class="sd">    &gt;&gt;&gt; sns_figure(&#39;full&#39;,&quot;darkgrid&quot;, {&quot;xtick.major.size&quot;: 8, &quot;ytick.major.size&quot;: 8})</span>
<span class="sd">    </span>
<span class="sd">    See https://stanford.edu/~mwaskom/software/seaborn/tutorial/aesthetics.html#temporarily-setting-figure-style</span>
<span class="sd">    </span>
<span class="sd">    There are 5 preset *styles*: &#39;darkgrid&#39;, &#39;whitegrid&#39;, &#39;dark&#39;, &#39;white&#39;, and &#39;ticks&#39;</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">seaborn</span> <span class="kn">import</span> <span class="n">axes_style</span>
    <span class="k">with</span> <span class="n">axes_style</span><span class="p">(</span><span class="n">style</span><span class="p">,</span><span class="n">rc</span><span class="p">):</span>
        <span class="n">figure</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
        
<span class="k">def</span> <span class="nf">sns_subplots</span><span class="p">(</span><span class="n">nrows</span><span class="p">,</span><span class="n">ncols</span><span class="p">,</span><span class="n">pos</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">,</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;darkgrid&#39;</span><span class="p">,</span><span class="n">ravel</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Created 07/27/2016</span>
<span class="sd">    </span>
<span class="sd">    Used to temporaritly change figure style in seaborn</span>
<span class="sd">    </span>
<span class="sd">    ``**kwargs`` take arguments to :func:`plt.subplots`</span>
<span class="sd">    </span>
<span class="sd">    &gt;&gt;&gt; fig,axes = tw.sns_subplots(3,3,pos=&#39;full&#39;,sharey=True)</span>
<span class="sd">    </span>
<span class="sd">    See https://stanford.edu/~mwaskom/software/seaborn/tutorial/aesthetics.html#temporarily-setting-figure-style</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">seaborn</span> <span class="kn">import</span> <span class="n">axes_style</span>
    <span class="k">with</span> <span class="n">axes_style</span><span class="p">(</span><span class="n">style</span><span class="p">):</span>
        <span class="n">fig</span><span class="p">,</span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="p">,</span><span class="n">ncols</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">fig_set_geom</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">ravel</span><span class="p">:</span>
        <span class="c1"># this way, i don&#39;t have to use 2-d indexing</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span><span class="n">axes</span>
<span class="c1">#%% === pre 06/01/2016 ===</span>
<span class="k">def</span> <span class="nf">plt_max_fig</span><span class="p">(</span><span class="n">n_fig</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Ensure there&#39;s only n_fig figures opened (Created 01/25/2016)</span>

<span class="sd">    Useful when I have to many figures opened at once</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">())</span> <span class="o">&gt;</span> <span class="n">n_fig</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">close_lastfig</span><span class="p">(</span><span class="n">n_fig</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Close the last n_fig figures</span>
<span class="sd">    </span>
<span class="sd">    Created 07/25/2016</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">fignum</span> <span class="ow">in</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_fignums</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="n">n_fig</span><span class="p">]:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fignum</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
      Last updated on Jan 01, 2017.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>